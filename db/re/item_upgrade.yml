# This file is a part of rAthena.
#   Copyright(C) 2020 rAthena Development Team
#   https:#rathena.org - https:#github.com/rathena
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see <http:#www.gnu.org/licenses/>.
#
###########################################################################
# Item Upgrade Database
###########################################################################
#
# Item Upgrade Settings
#
###########################################################################
# - Item                  # Item name of Upgrade Box
#   NeedRefineMin         # Minimum refine level needed for target item (Default: 0)
#   NeedRefineMax         # Maximum refine level needed for target item (Default: MAX_REFINE)
#   NeedOptionNumMin      # Minimum random option that target item has (Default: 0)
#   NotSocketEnchantItem  # Target item must not have enchant stone (Default: true)
#   TargetItem            # List of possible item to be upgraded
#     - Item              # Target item name
#       Remove            # Remove this item from the list while importing (Default: false) (optional)
#   Result                # Script executed on successful upgrade
#   ClearTargetItem       # Used to clear TargetItem list while importing (Default: false) (optional)
###########################################################################

Header:
  Type: ITEM_UPGRADE_DB
  Version: 1

Body:
  - Item: Ancient_Hero_Bravery
    TargetItem:
      - Item: Royal_Bow_K
      - Item: Narcis_Bow
      - Item: Shadow_Staff_K
      - Item: Iron_Nail_K
      - Item: Magic_Sword
      - Item: Sword_Of_Bluefire
      - Item: Avenger
      - Item: Iron_Staff
      - Item: Oriental_Sword
      - Item: Undine_Spear_K
      - Item: Demon_Hunting_Bible_K
      - Item: Shiver_Katar_K
      - Item: OneSkyOneSun
      - Item: SoulWeight
      - Item: MeawFoxtail
      - Item: Crimson_Rose
      - Item: Master_Soul_Rifle
      - Item: Demon_S_Shot
      - Item: Golden_L_Launcher
      - Item: The_Black_Gatling
      - Item: Sharp_Wind_Sword
      - Item: Fog_Dew_Sword
      - Item: Humma_Clear
      - Item: Dragonic_Slayer
      - Item: Light_Blade
      - Item: Slate_Sword
      - Item: Trumpet_Shell_K
      - Item: Barb_Wire_K
      - Item: Meteor_Striker
      - Item: Blade_Katar
      - Item: Scalet_Dragon_L_Bow
      - Item: Fatalist
      - Item: Ray_Knuckle
      - Item: Saint_Hall
      - Item: Blue_Crystal_Staff
      - Item: Freezing_Rod
      - Item: Up_Oriental_Sword
      - Item: Up_Dragonic_Slayer
      - Item: Up_Shiver_Katar_K
      - Item: Up_Blade_Katar
      - Item: Up_Sword_Of_Bluefire
      - Item: Up_Slate_Sword
      - Item: Up_Narcis_Bow
      - Item: Up_Trumpet_Shell_K
      - Item: Up_Barb_Wire_K
      - Item: Up_Avenger
      - Item: Up_Magic_Sword
      - Item: Up_Fatalist
      - Item: Up_Meteor_Striker
      - Item: Up_Royal_Bow_K
      - Item: Up_Scalet_Dragon_L_Bow
      - Item: Up_Shadow_Staff_K
      - Item: Up_Freezing_Rod
      - Item: Up_Iron_Nail_K
      - Item: Up_Ray_Knuckle
      - Item: Up_Undine_Spear_K
      - Item: Up_Light_Blade
      - Item: Up_Iron_Staff
      - Item: Up_Blue_Crystal_Staff
      - Item: Up_Demon_Hunting_Bible
      - Item: Up_Saint_Hall
      - Item: Up_MeawFoxtail
      - Item: Up_Fog_Dew_Sword
      - Item: Up_Humma_Clear
      - Item: Up_Master_Soul_Rifle
      - Item: Up_Golden_L_Launcher
      - Item: Up_The_Black_Gatling
      - Item: Up_Demon_S_Shot
      - Item: Up_Crimson_Rose
      - Item: Up_OneSkyOneSun
      - Item: Up_SoulWeight
    Result: |
      callfunc("F_Lapine_Ancient_Hero_Bravery", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Ancient_Hero_Wisdom
    TargetItem:
      - Item: Royal_Bow_K
      - Item: Narcis_Bow
      - Item: Shadow_Staff_K
      - Item: Iron_Nail_K
      - Item: Magic_Sword
      - Item: Sword_Of_Bluefire
      - Item: Avenger
      - Item: Iron_Staff
      - Item: Oriental_Sword
      - Item: Undine_Spear_K
      - Item: Demon_Hunting_Bible_K
      - Item: Shiver_Katar_K
      - Item: OneSkyOneSun
      - Item: SoulWeight
      - Item: MeawFoxtail
      - Item: Crimson_Rose
      - Item: Master_Soul_Rifle
      - Item: Demon_S_Shot
      - Item: Golden_L_Launcher
      - Item: The_Black_Gatling
      - Item: Sharp_Wind_Sword
      - Item: Fog_Dew_Sword
      - Item: Humma_Clear
      - Item: Dragonic_Slayer
      - Item: Light_Blade
      - Item: Slate_Sword
      - Item: Trumpet_Shell_K
      - Item: Barb_Wire_K
      - Item: Meteor_Striker
      - Item: Blade_Katar
      - Item: Scalet_Dragon_L_Bow
      - Item: Fatalist
      - Item: Ray_Knuckle
      - Item: Saint_Hall
      - Item: Blue_Crystal_Staff
      - Item: Freezing_Rod
      - Item: Up_Oriental_Sword
      - Item: Up_Dragonic_Slayer
      - Item: Up_Shiver_Katar_K
      - Item: Up_Blade_Katar
      - Item: Up_Sword_Of_Bluefire
      - Item: Up_Slate_Sword
      - Item: Up_Narcis_Bow
      - Item: Up_Trumpet_Shell_K
      - Item: Up_Barb_Wire_K
      - Item: Up_Avenger
      - Item: Up_Magic_Sword
      - Item: Up_Fatalist
      - Item: Up_Meteor_Striker
      - Item: Up_Royal_Bow_K
      - Item: Up_Scalet_Dragon_L_Bow
      - Item: Up_Shadow_Staff_K
      - Item: Up_Freezing_Rod
      - Item: Up_Iron_Nail_K
      - Item: Up_Ray_Knuckle
      - Item: Up_Undine_Spear_K
      - Item: Up_Light_Blade
      - Item: Up_Iron_Staff
      - Item: Up_Blue_Crystal_Staff
      - Item: Up_Demon_Hunting_Bible
      - Item: Up_Saint_Hall
      - Item: Up_MeawFoxtail
      - Item: Up_Fog_Dew_Sword
      - Item: Up_Humma_Clear
      - Item: Up_Master_Soul_Rifle
      - Item: Up_Golden_L_Launcher
      - Item: Up_The_Black_Gatling
      - Item: Up_Demon_S_Shot
      - Item: Up_Crimson_Rose
      - Item: Up_OneSkyOneSun
      - Item: Up_SoulWeight
    Result: |
      callfunc("F_Lapine_Ancient_Hero_Wisdom", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: ILL_Piece_A
    TargetItem:
      - Item: Bazerald_IL
      - Item: Butcher_IL
      - Item: Gold_Lux_IL
      - Item: Infiltrator_IL
      - Item: Illusion_War_Axe
      - Item: Illusion_Immaterial_Sword
      - Item: Illusion_Iron_Driver
      - Item: Illusion_Pole_Axe
      - Item: Book_Of_The_Apo_IL
      - Item: Balistar_IL
      - Item: Illusion_Wing_Shuriken
      - Item: Wizardy_Staff_IL
      - Item: Long_Mace_IL
      - Item: Huuma_Flutter_Snow_IL
      - Item: Combo_Battle_Glove_IL
      - Item: Spectral_Spear_IL
      - Item: Staff_Of_Bordeaux_IL
      - Item: Moonlight_Sword_IL
      - Item: Hunter_Bow_IL
      - Item: Tablet_IL
      - Item: Gate_KeeperDD_IL
      - Item: Counter_Dagger_IL
      - Item: Survival_Staff_IL
      - Item: Taegoolyeon_IL
      - Item: Death_Guidance_IL
      - Item: KatarOfCold_Icicle_IL
      - Item: Brionac_IL
      - Item: Zephyrus_IL
      - Item: Electronic_Guitar_ILL
      - Item: Electric_Eel_IL
      - Item: Doom_Slayer_IL
      - Item: Excalibur_IL
      - Item: Ancient_Dagger_IL
      - Item: Gelerdria_IL
      - Item: Thorn_Staff_IL
      - Item: Dea_Staff_IL
    Result: |
      callfunc("F_Lapine_ILL_Piece_A", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: ILL_Piece_B
    TargetItem:
      - Item: Bazerald_IL
      - Item: Butcher_IL
      - Item: Gold_Lux_IL
      - Item: Infiltrator_IL
      - Item: Illusion_War_Axe
      - Item: Illusion_Immaterial_Sword
      - Item: Illusion_Iron_Driver
      - Item: Illusion_Pole_Axe
      - Item: Book_Of_The_Apo_IL
      - Item: Balistar_IL
      - Item: Illusion_Wing_Shuriken
      - Item: Wizardy_Staff_IL
      - Item: Long_Mace_IL
      - Item: Huuma_Flutter_Snow_IL
      - Item: Combo_Battle_Glove_IL
      - Item: Spectral_Spear_IL
      - Item: Staff_Of_Bordeaux_IL
      - Item: Moonlight_Sword_IL
      - Item: Hunter_Bow_IL
      - Item: Tablet_IL
      - Item: Gate_KeeperDD_IL
      - Item: Counter_Dagger_IL
      - Item: Survival_Staff_IL
      - Item: Taegoolyeon_IL
      - Item: Death_Guidance_IL
      - Item: KatarOfCold_Icicle_IL
      - Item: Brionac_IL
      - Item: Zephyrus_IL
      - Item: Electronic_Guitar_ILL
      - Item: Electric_Eel_IL
      - Item: Doom_Slayer_IL
      - Item: Excalibur_IL
      - Item: Ancient_Dagger_IL
      - Item: Gelerdria_IL
      - Item: Thorn_Staff_IL
      - Item: Dea_Staff_IL
    Result: |
      callfunc("F_Lapine_ILL_Piece_B", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Gemstone_Of_Time
    TargetItem:
      - Item: Overwhelm_Str_Armor
      - Item: Overwhelm_Int_Armor
      - Item: Overwhelm_Vit_Armor
      - Item: Overwhelm_Dex_Armor
      - Item: Overwhelm_Agi_Armor
      - Item: Overwhelm_Luk_Armor
    Result: |
      callfunc("F_Lapine_Gemstone_Of_Time", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Time_Unseal_Key
    TargetItem:
      - Item: Temporal_M_Str
      - Item: Temporal_M_Agi
      - Item: Temporal_M_Vit
      - Item: Temporal_M_Int
      - Item: Temporal_M_Dex
      - Item: Temporal_M_Luk
    Result: |
      callfunc("F_Lapine_Time_Unseal_Key", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Magma_Essence
    NeedOptionNumMin: 2
    TargetItem:
      - Item: Lava_Leather_Armor
      - Item: Lava_Leather_Suits
      - Item: Lava_Leather_Robe
    Result: |
      callfunc("F_Lapine_Magma_Essence", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2], .@opts[3]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: EP17_1_SPC05
    TargetItem:
      - Item: Cannon_Rapier_OS
      - Item: Beam_Claymore_OS
      - Item: Rutilus_Stick_OS
      - Item: Circuit_Board_OS
      - Item: Blasti_OS
      - Item: Saphir_Hall_OS
      - Item: Virtual_Bow_OS
      - Item: MH_P89_OS
      - Item: Meuchler_OS
      - Item: Burning_Knuckle_OS
      - Item: HR_S55_OS
      - Item: Kuroiro_OS
      - Item: AC_B44_OS
      - Item: Boost_Lance_OS
      - Item: Ultio_Spes_OS
      - Item: ElectricFox_OS
    Result: |
      callfunc("F_Lapine_EP17_1_SPC05", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: EP17_1_SPC06
    TargetItem:
      - Item: Cannon_Rapier_OS
      - Item: Beam_Claymore_OS
      - Item: Rutilus_Stick_OS
      - Item: Circuit_Board_OS
      - Item: Blasti_OS
      - Item: Saphir_Hall_OS
      - Item: Virtual_Bow_OS
      - Item: MH_P89_OS
      - Item: Meuchler_OS
      - Item: Burning_Knuckle_OS
      - Item: HR_S55_OS
      - Item: Kuroiro_OS
      - Item: AC_B44_OS
      - Item: Boost_Lance_OS
      - Item: Ultio_Spes_OS
      - Item: ElectricFox_OS
    Result: |
      callfunc("F_Lapine_EP17_1_SPC06", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: EP17_1_SPC07
    TargetItem:
      - Item: Cannon_Rapier_OS
      - Item: Beam_Claymore_OS
      - Item: Rutilus_Stick_OS
      - Item: Circuit_Board_OS
      - Item: Blasti_OS
      - Item: Saphir_Hall_OS
      - Item: Virtual_Bow_OS
      - Item: MH_P89_OS
      - Item: Meuchler_OS
      - Item: Burning_Knuckle_OS
      - Item: HR_S55_OS
      - Item: Kuroiro_OS
      - Item: AC_B44_OS
      - Item: Boost_Lance_OS
      - Item: Ultio_Spes_OS
      - Item: ElectricFox_OS
    Result: |
      callfunc("F_Lapine_EP17_1_SPC07", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: EP17_1_SPC08
    TargetItem:
      - Item: Cannon_Rapier_OS
      - Item: Beam_Claymore_OS
      - Item: Rutilus_Stick_OS
      - Item: Circuit_Board_OS
      - Item: Blasti_OS
      - Item: Saphir_Hall_OS
      - Item: Virtual_Bow_OS
      - Item: MH_P89_OS
      - Item: Meuchler_OS
      - Item: Burning_Knuckle_OS
      - Item: HR_S55_OS
      - Item: Kuroiro_OS
      - Item: AC_B44_OS
      - Item: Boost_Lance_OS
      - Item: Ultio_Spes_OS
      - Item: ElectricFox_OS
    Result: |
      callfunc("F_Lapine_EP17_1_SPC08", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: EP17_1_SPC09
    TargetItem:
      - Item: Cannon_Rapier_OS
      - Item: Beam_Claymore_OS
      - Item: Rutilus_Stick_OS
      - Item: Circuit_Board_OS
      - Item: Blasti_OS
      - Item: Saphir_Hall_OS
      - Item: Virtual_Bow_OS
      - Item: MH_P89_OS
      - Item: Meuchler_OS
      - Item: Burning_Knuckle_OS
      - Item: HR_S55_OS
      - Item: Kuroiro_OS
      - Item: AC_B44_OS
      - Item: Boost_Lance_OS
      - Item: Ultio_Spes_OS
      - Item: ElectricFox_OS
    Result: |
      callfunc("F_Lapine_EP17_1_SPC09", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: EP17_1_SPC10
    TargetItem:
      - Item: Cannon_Rapier_OS
      - Item: Beam_Claymore_OS
      - Item: Rutilus_Stick_OS
      - Item: Circuit_Board_OS
      - Item: Blasti_OS
      - Item: Saphir_Hall_OS
      - Item: Virtual_Bow_OS
      - Item: MH_P89_OS
      - Item: Meuchler_OS
      - Item: Burning_Knuckle_OS
      - Item: HR_S55_OS
      - Item: Kuroiro_OS
      - Item: AC_B44_OS
      - Item: Boost_Lance_OS
      - Item: Ultio_Spes_OS
      - Item: ElectricFox_OS
    Result: |
      callfunc("F_Lapine_EP17_1_SPC10", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Charleston_Parts_W
    TargetItem:
      - Item: Pilebuncker
      - Item: Pilebuncker_S
      - Item: Pilebuncker_T
      - Item: Pilebuncker_P
      - Item: Robot's_Arm
      - Item: Tornado_Axe
      - Item: Giant_Blade
    Result: |
      callfunc("F_Lapine_Charleston_Parts_W", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Charleston_Parts_R
    TargetItem:
      - Item: Pilebuncker
      - Item: Pilebuncker_S
      - Item: Pilebuncker_T
      - Item: Pilebuncker_P
      - Item: Robot's_Arm
      - Item: Tornado_Axe
      - Item: Giant_Blade
    Result: |
      callfunc("F_Lapine_Charleston_Parts_R", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Gray_Charcoal_Range
    TargetItem:
      - Item: Thanos_Bow
      - Item: Thanos_Violin
      - Item: Thanos_Whip
      - Item: Thanos_Sword
      - Item: Thanos_Great_Sword
      - Item: Thanos_Spear
      - Item: Thanos_Long_Spear
      - Item: Thanos_Katar
      - Item: Thanos_Knuckle
      - Item: Thanos_Hammer
      - Item: Thanos_Axe
    Result: |
      callfunc("F_Lapine_Gray_Charcoal_Range", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Gray_Charcoal_Magic
    TargetItem:
      - Item: Thanos_Rod
      - Item: Thanos_Staff
      - Item: Thanos_Dagger
      - Item: Thanos_Sword
      - Item: Thanos_Violin
      - Item: Thanos_Whip
    Result: |
      callfunc("F_Lapine_Gray_Charcoal_Magic", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Gray_Charcoal_Melee
    TargetItem:
      - Item: Thanos_Whip
      - Item: Thanos_Sword
      - Item: Thanos_Great_Sword
      - Item: Thanos_Spear
      - Item: Thanos_Long_Spear
      - Item: Thanos_Dagger
      - Item: Thanos_Katar
      - Item: Thanos_Knuckle
      - Item: Thanos_Hammer
      - Item: Thanos_Axe
      - Item: Thanos_Violin
    Result: |
      callfunc("F_Lapine_Gray_Charcoal_Melee", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Geffen_Magic_Scroll2
    TargetItem:
      - Item: Body_Power_Up_Ring
      - Item: Ring_Of_Spell_Explosion
    Result: |
      callfunc("F_Lapine_Geffen_Magic_Scroll2", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Geffen_Magic_Scroll
    TargetItem:
      - Item: Geffen_Mage_Robe
      - Item: Anti_Magic_Suit
    Result: |
      callfunc("F_Lapine_Geffen_Magic_Scroll", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Silver_Statue #23545 # Silver_Statue, ??? ??? ??
    TargetItem:
      - Item: Bloody_Knight_Shield #28942 #Bloody_Knight_Shield
    Result: |
        .@r = rand(10000);
        if (.@r < 100) {
            getitem(28946,1);
        } else if (.@r < 300) {
            getitem(28945,1);
        } else {    
        callfunc("F_Lapine_Silver_Statue", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
        .@params[0] = 0;
        getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
        };
  - Item: Cursed_Blood
    TargetItem:
      - Item: Bloody_Knight_Shield_
    Result: |
      callfunc("F_Lapine_Cursed_Blood", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Gold_Statue
    TargetItem:
      - Item: Bloody_Knight_Shield__
    Result: |
      callfunc("F_Lapine_Gold_Statue", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Shadow_Refine_Hammer
    NeedRefineMax: 9
    NotSocketEnchantItem: false
    TargetItem:
      - Item: T1_Shadow_Armor
      - Item: T1_Shadow_Weapon
      - Item: T1_Shadow_Shield
      - Item: T1_Shadow_Shoes
      - Item: T1_Shadow_R_Accessory
      - Item: T1_Shadow_L_Accessory
      - Item: T2_Shadow_Armor
      - Item: T2_Shadow_Weapon
      - Item: T2_Shadow_Shield
      - Item: T2_Shadow_Shoes
      - Item: T2_Shadow_R_Accessory
      - Item: T2_Shadow_L_Accessory
      - Item: S_Promotion_Weapon
      - Item: S_Promotion_Armor
      - Item: S_Promotion_Shoes
      - Item: S_Promotion_Shield
      - Item: S_Promotion_Earring
      - Item: S_Promotion_Pendant
      - Item: S_Physical_Earring
      - Item: S_Physical_Weapon
      - Item: S_Physical_Pendant
      - Item: S_Magical_Earring
      - Item: S_Magical_Weapon
      - Item: S_Magical_Pendant
      - Item: S_Breezy_Armor
      - Item: S_Champion_Shoes
      - Item: S_Athena_Shield
      - Item: S_Immune_Armor
      - Item: S_Hard_Armor
      - Item: S_Ancient_Armor
      - Item: S_Critical_Armor
      - Item: S_Kingbird_Weapon
      - Item: S_Cri_Hit_Weapon
      - Item: S_Healing_Weapon
      - Item: S_Lucky_Weapon
      - Item: S_Power_Earring
      - Item: S_Int_Pendant
      - Item: S_Dexterous_Armor
      - Item: S_Vital_Shoes
      - Item: S_Athletic_Shield
      - Item: S_Lucky_Armor
      - Item: S_Power_Pendant
      - Item: S_Int_Earring
      - Item: S_Dexterous_Weapon
      - Item: S_Vital_Shield
      - Item: S_Athletic_Shoes
      - Item: S_Resist_Spell_Pendant
      - Item: S_Rapid_Pendant
      - Item: S_Caster_Pendant
      - Item: S_Hard_Earring
      - Item: S_Wise_Earring
      - Item: S_Athena_Earring
      - Item: S_Cranial_Shield
      - Item: S_Safeguard_Shield
      - Item: S_Brutal_Shield
      - Item: S_Gargantua_Shield
      - Item: S_Homers_Shield
      - Item: S_Dragoon_Shield
      - Item: S_Satanic_Shield
      - Item: S_Flameguard_Shield
      - Item: S_Requiem_Shield
      - Item: S_Cadi_Shield
      - Item: S_Bloody_Shoes
      - Item: S_Liberation_Shoes
      - Item: S_Chemical_Shoes
      - Item: S_Clamorous_Shoes
      - Item: S_Insecticide_Shoes
      - Item: S_Fisher_Shoes
      - Item: S_Seraphim_Shoes
      - Item: S_Beholder_Shoes
      - Item: S_Divine_Shoes
      - Item: S_Dragoon_Shoes
      - Item: S_Big_Armor
      - Item: S_Medium_Armor
      - Item: S_Small_Armor
      - Item: S_Big_Weapon
      - Item: S_Medium_Weapon
      - Item: S_Small_Weapon
      - Item: S_Spiritual_Weapon
      - Item: S_Spiritual_Earring
      - Item: S_Spiritual_Pendent
      - Item: S_Malicious_Armor
      - Item: S_Malicious_Shoes
      - Item: S_Malicious_Shield
      - Item: S_Gemstone_Armor
      - Item: S_Gemstone_Shoes
      - Item: S_Gemstone_Shield
      - Item: S_Gemstone_Weapon
      - Item: S_Gemstone_Earring
      - Item: S_Gemstone_Pendent
      - Item: S_Stability_Shield
      - Item: S_Plasterer's_Armor
      - Item: S_Plasterer's_Shoes
      - Item: S_Insomniac_Armor
      - Item: S_Insomniac_Shoes
      - Item: S_Peerless_Armor
      - Item: S_Peerless_Shoes
      - Item: S_Adurate_Armor
      - Item: S_Adurate_Shoes
      - Item: Unfreez_Weapon_S
      - Item: Unfreeze_Earing_S
      - Item: Unfreeze_Pendent_S
      - Item: Vitality_Earing_S
      - Item: Vitality_Pendant_S
      - Item: S_Neutral_Weapon
      - Item: S_Neutral_Earring
      - Item: S_Neutral_Pendent
      - Item: S_Curse_Lift_Earring
      - Item: S_Curse_Lift_Pendent
      - Item: S_Caster_earring
      - Item: S_Caster_Weapon
      - Item: S_Spell_Flow_Shoes
      - Item: S_Spell_Flow_Armor
      - Item: S_Spell_Flow_Shield
      - Item: S_Greed_Armor
      - Item: S_Greed_Shoes
      - Item: S_Greed_Shield
      - Item: S_Greed_Weapon
      - Item: S_Greed_Earring
      - Item: S_Greed_Pendant
      - Item: S_Heal_Armor
      - Item: S_Heal_Shoes
      - Item: S_Heal_Shield
      - Item: S_Heal_Weapon
      - Item: S_Heal_Earring
      - Item: S_Heal_Pendant
      - Item: S_Hiding_Armor
      - Item: S_Hiding_Shoes
      - Item: S_Hiding_Shield
      - Item: S_Hiding_Weapon
      - Item: S_Hiding_Earring
      - Item: S_Hiding_Pendant
      - Item: S_Cloaking_Armor
      - Item: S_Cloaking_Shoes
      - Item: S_Cloaking_Shield
      - Item: S_Cloaking_Weapon
      - Item: S_Cloaking_Earring
      - Item: S_Cloaking_Pendant
      - Item: S_Teleport_Armor
      - Item: S_Teleport_Shoes
      - Item: S_Teleport_Shield
      - Item: S_Teleport_Weapon
      - Item: S_Teleport_Earring
      - Item: S_Teleport_Pendant
      - Item: S_Steal_Armor
      - Item: S_Steal_Shoes
      - Item: S_Steal_Shield
      - Item: S_Steal_Weapon
      - Item: S_Steal_Earring
      - Item: S_Steal_Pendant
      - Item: S_Infinity_Earring
      - Item: S_Infinity_Pendant
      - Item: S_Solid_Weapon
      - Item: S_Solid_Earring
      - Item: S_Immortal_Armor
      - Item: S_Immortal_Pendant
      - Item: S_Executioner_Weapon
      - Item: S_Exorcist_Weapon
      - Item: S_Hunting_Weapon
      - Item: S_Insect_Net_Weapon
      - Item: S_Fishing_Weapon
      - Item: S_Dragon_Killer_Weapon
      - Item: S_Corrupt_Weapon
      - Item: S_Vibration_Weapon
      - Item: S_Holy_Water_Weapon
      - Item: S_Scissors_Weapon
      - Item: S_Penetration_Earring
      - Item: S_Penetration_Pendent
      - Item: S_Tempest_Earring
      - Item: S_Tempest_Pendent
      - Item: S_M_Executioner_Weapon
      - Item: S_M_Exorcist_Weapon
      - Item: S_M_Hunting_Weapon
      - Item: S_M_Insect_Net_Weapon
      - Item: S_M_Fishing_Weapon
      - Item: S_M_Dragon_K_Weapon
      - Item: S_M_Corrupt_Weapon
      - Item: S_M_Vibration_Weapon
      - Item: S_M_Holy_Water_Weapon
      - Item: S_M_Scissors_Weapon
      - Item: S_Bearers_Armor
      - Item: S_Bearers_Shoes
      - Item: S_Bearers_Shield
      - Item: S_Bearers_Weapon
      - Item: S_Bearers_Earring
      - Item: S_Bearers_Pendent
      - Item: S_Basis_Armor
      - Item: S_Hallowed_Armor
      - Item: S_Saharic_Armor
      - Item: S_Underneath_Armor
      - Item: S_Flam_Armor
      - Item: S_Windy_Armor
      - Item: S_Envenom_Armor
      - Item: S_Damned_Armor
      - Item: S_Geist_Armor
      - Item: S_Divine_Armor
      - Item: S_Hasty_Shoes
      - Item: S_Hasty_Armor
      - Item: S_Basis_Shield
      - Item: S_Hallowed_Shield
      - Item: S_Saharic_Shield
      - Item: S_Underneath_Shield
      - Item: S_Flam_Shield
      - Item: S_Windy_Shield
      - Item: S_Envenom_Shield
      - Item: S_Damned_Shield
      - Item: S_Geist_Shield
      - Item: S_Divine_Shield
      - Item: S_Expert_Shoes
      - Item: S_Expert_Shield
      - Item: S_Beginner_Shoes
      - Item: S_Beginner_Shield
      - Item: S_Rookie_Shoes
      - Item: S_Rookie_Shield
      - Item: S_Advanced_Shoes
      - Item: S_Advanced_Shield
      - Item: S_Attack_Armor
      - Item: S_Blitz_Earring
      - Item: S_Blitz_Pendent
      - Item: S_ColdBolt_Armor
      - Item: S_FireBolt_Armor
      - Item: S_LightingBolt_Armor
      - Item: S_EarthSpike_Armor
      - Item: S_Enhance_Force_Weapon
      - Item: S_Force_Weapon
      - Item: S_Force_Earring
      - Item: S_Force_Pendant
      - Item: S_Enhance_Spirit_Weapon
      - Item: S_Spirit_Weapon
      - Item: S_Spirit_Earring
      - Item: S_Spirit_Pendant
      - Item: S_Blitz_Shoes
      - Item: S_Blitz_Shield
      - Item: S_Exceed_Weapon
      - Item: S_Titan_Earring
      - Item: S_Titan_Pendant
      - Item: S_Boned_Earring
      - Item: S_Boned_Pendant
      - Item: S_Gigantic_Earring
      - Item: S_Gigantic_Pendant
      - Item: S_Caster_Shoes
      - Item: S_Caster_Shield
      - Item: S_Caster_Armor
      - Item: S_Reload_Shoes
      - Item: S_Reload_Shield
      - Item: S_Reload_Armor
      - Item: S_Swordman_earring
      - Item: S_Merchant_earring
      - Item: S_Acolyte_earring
      - Item: S_Magician_earring
      - Item: S_Swordman_Pendant
      - Item: S_Merchant_Pendant
      - Item: S_Acolyte_Pendant
      - Item: S_Thief_Pendant
      - Item: S_Magician_Pendant
      - Item: S_Archer_Pendant
      - Item: S_Knight_Shoes
      - Item: S_Crusader_Shoes
      - Item: S_Blacksmith_Shoes
      - Item: S_Alchemist_Shoes
      - Item: S_Priest_Shoes
      - Item: S_Monk_Shoes
      - Item: S_Assassin_Shoes
      - Item: S_Rogue_Shoes
      - Item: S_Wizard_Shoes
      - Item: S_Sage_Shoes
      - Item: S_Hunter_Shoes
      - Item: S_Bard_Shoes
      - Item: S_Dancer_Shoes
      - Item: S_Knight_Armor
      - Item: S_Crusader_Armor
      - Item: S_Blacksmith_Armor
      - Item: S_Alchemist_Armor
      - Item: S_Priest_Armor
      - Item: S_Monk_Armor
      - Item: S_Assassin_Armor
      - Item: S_Rogue_Armor
      - Item: S_Wizard_Armor
      - Item: S_Sage_Armor
      - Item: S_Hunter_Armor
      - Item: S_Bard_Armor
      - Item: S_Dancer_Armor
      - Item: S_SuperNovice_Weapon
      - Item: S_Gunslinger_Weapon
      - Item: S_Taekwon_Weapon
      - Item: S_Ninja_Weapon
      - Item: S_DoramMagical_Weapon
      - Item: S_DoramPhysical_Weapon
      - Item: S_Runeknight_Weapon
      - Item: S_Royalguard_Weapon
      - Item: S_Mechanic_weapon
      - Item: S_Genetic_Weapon
      - Item: S_Archbishop_Weapon
      - Item: S_Sura_weapon
      - Item: S_Guillotine_Weapon
      - Item: S_Shadowchaser_Weapon
      - Item: S_Warlock_Weapon
      - Item: S_Sorcerer_Weapon
      - Item: S_Ranger_Weapon
      - Item: S_Minstrel_Weapon
      - Item: S_Wanderer_Weapon
      - Item: S_Runeknight_Shield
      - Item: S_Royalguard_Shield
      - Item: S_Mechanic_Shield
      - Item: S_Genetic_Shield
      - Item: S_Archbishop_Shield
      - Item: S_Sura_Shield
      - Item: S_Guillotine_Shield
      - Item: S_Shadowchaser_Shield
      - Item: S_Warlock_Shield
      - Item: S_Sorcerer_Shield
      - Item: S_Ranger_Shield
      - Item: S_Minstrel_Shield
      - Item: S_Wanderer_Shield
      - Item: S_Ninja_Shield
      - Item: S_Taekwon_Shield
      - Item: S_DoramPhysical_Shield
      - Item: S_DoramMagical_Shield
      - Item: S_SuperNovice_Shield
      - Item: S_Gunslinger_Shield
      - Item: S_Hasty_Shoes_II
      - Item: S_Bearer's_Pendant_II
      - Item: S_Gemstone_Earring_II
      - Item: S_Spellflow_Shield_II
      - Item: S_Spiritual_Weapon_II
      - Item: S_Malicious_Armor_II
      - Item: S_Sigrun_Armor
      - Item: S_Sigrun_Shield
      - Item: S_Force_Executioner_Weapon
      - Item: S_Spirit_Magic_Executioner_Weapon
      - Item: S_Caster_Armor_II
      - Item: S_Reload_Armor_II
      - Item: S_Critical_Shield
      - Item: S_Critical_Shoes
      - Item: S_Magic_Compose_Armor
      - Item: S_Gemstone_Weapon_II
      - Item: S_Gemstone_Shield_II
      - Item: S_Bearer's_Armor_II
      - Item: S_Bearer's_Shoes_II
      - Item: S_Almighty_Earring
      - Item: S_Almighty_Pendant
      - Item: S_All_Race_Shoes
      - Item: S_All_Race_Shield
      - Item: S_Blitz_Weapon
      - Item: S_Blitz_Armor
      - Item: S_Tempest_Shield
      - Item: S_Tempest_Shoes
      - Item: S_Magic_Executioner_Holy_Water_Armor
      - Item: S_Magic_Exorcist_Corrupted_Armor
      - Item: S_Magic_Vibration_Dragon_Killer_Armor
      - Item: S_Magic_Scissor_Hunting_Armor
      - Item: S_Magic_Fishing_Insect_Net_Armor
      - Item: S_Plasterer's_Armor_II
      - Item: S_Insomniac_Shoes_II
      - Item: S_Peerless_Armor_II
      - Item: S_Adulate_Shoes_II
      - Item: S_Unfreezing_Weapon_II
      - Item: S_Vitality_Earring_II
      - Item: S_Neutral_Weapon_II
      - Item: S_Uncursed_Pendant_II
      - Item: S_Tension_Weapon
      - Item: S_Tension_Earring
      - Item: S_Tension_Pendent
      - Item: S_Elegant_Weapon
      - Item: S_Elegant_Earring
      - Item: S_Elegant_Pendent
      - Item: S_Healing_Shield
      - Item: S_Healing_Shoes
      - Item: S_Restore_Earring
      - Item: S_Restore_Pendant
      - Item: S_Mortal_Blow_Weapon
      - Item: S_Mortal_Blow_Earring
      - Item: S_Mortal_Blow_Pendant
      - Item: S_Penetration_Shoes
      - Item: S_Penetration_Shield
      - Item: S_Executioner_Holy_Water_Armor
      - Item: S_Exorcist_Corrupted_Armor
      - Item: S_Vibration_Dragon_Killer_Armor
      - Item: S_Scissor_Hunting_Armor
      - Item: S_Fishing_Insect_Net_Armor
      - Item: Sentimental_Weapone_S
      - Item: Sentimental_Earring_S
      - Item: Sentimental_Pendant_S
      - Item: Enchanting_Weapone_S
      - Item: Enchanting_Earring_S
      - Item: Enchanting_Pendant_S
      - Item: S_Infinity_Weapon
      - Item: S_Physical_Shoes
      - Item: S_Physical_Shield
      - Item: S_Physical_Armor
      - Item: S_Magical_Shoes
      - Item: S_Magical_Shield
      - Item: S_Magical_Armor
      - Item: S_ImmunedAthena_Shield
      - Item: S_HardChamption_Shoes
      - Item: S_KingbirdAncient_Armor
      - Item: S_CriticalHit_Armor
      - Item: S_Thief_earring
      - Item: S_Archer_earring
      - Item: S_Rebellion_Armor
      - Item: S_Kagerou_Armor
      - Item: S_Oboro_Armor
      - Item: S_Rebellion_Shoes
      - Item: S_Kagerou_Shoes
      - Item: S_Oboro_Shoes
      - Item: S_DoramPhysical_Armor
      - Item: S_DoramPhysical_Shoes
      - Item: S_DoramMagical_Armor
      - Item: S_DoramMagical_Shoes
      - Item: S_Star_Emperor_Armor
      - Item: S_Star_Emperor_Shoes
      - Item: S_Soul_Reaper_Armor
      - Item: S_Soul_Reaper_Shoes
      - Item: S_Tempest_Weapon
      - Item: S_Tempest_Armor
      - Item: S_PerfectSize_Weapon
      - Item: S_PerfectSize_Armor
      - Item: S_M_Exo_Co_Weapon
      - Item: S_M_Viv_Dr_Weapon
      - Item: S_M_Sci_Hu_Weapon
      - Item: S_M_Fis_In_Weapon
      - Item: S_M_Exe_Ho_Weapon
      - Item: S_Penetration_Weapon
      - Item: S_Penetration_Armor
      - Item: S_Exe_Ho_Weapon
      - Item: S_Fis_In_Weapon
      - Item: S_Sci_Hu_Weapon
      - Item: S_Viv_Dr_Weapon
      - Item: S_Exo_Co_Weapon
      - Item: S_Hasty_Weapon
      - Item: S_Sonic_Armor
      - Item: S_Sonic_Shield
      - Item: S_Sonic_Shoes
      - Item: S_Ignition_Weapon
      - Item: S_Ignition_Pendant
      - Item: S_Ignition_Earing
      - Item: S_W_Breath_Armor
      - Item: S_W_Breath_Shield
      - Item: S_W_Breath_Shoes
      - Item: S_F_Breath_Weapon
      - Item: S_F_Breath_Pendant
      - Item: S_F_Breath_Earing
      - Item: S_Cluster_Armor
      - Item: S_Cluster_Shield
      - Item: S_Cluster_Shoes
      - Item: S_Aimed_Weapon
      - Item: S_Aimed_Pendant
      - Item: S_Aimed_Earing
      - Item: S_Arrow_Armor
      - Item: S_Arrow_Shield
      - Item: S_Arrow_Shoes
      - Item: S_Shooting_Weapon
      - Item: S_Shooting_Pendant
      - Item: S_Shooting_Earing
      - Item: S_Tornado_Armor
      - Item: S_Tornado_Shield
      - Item: S_Tornado_Shoes
      - Item: S_Boomerang_Weapon
      - Item: S_Boomerang_Pendant
      - Item: S_Boomerang_Earing
      - Item: S_Vulcan_Armor
      - Item: S_Vulcan_Shield
      - Item: S_Vulcan_Shoes
      - Item: S_Arms_Weapon
      - Item: S_Arms_Pendant
      - Item: S_Arms_Earing
      - Item: S_Rampage_Armor
      - Item: S_Rampage_Shield
      - Item: S_Rampage_Shoes
      - Item: S_Skynetblow_Weapon
      - Item: S_Skynetblow_Pendant
      - Item: S_Skynetblow_Earing
      - Item: S_Knucklearrow_Armor
      - Item: S_Knucklearrow_Shield
      - Item: S_Knucklearrow_Shoes
      - Item: S_TigerCannon_Weapon
      - Item: S_Tigercannon_Pendant
      - Item: S_Tigercannon_Earing
      - Item: S_Duplelight_Armor
      - Item: S_Duplelight_Shield
      - Item: S_Duplelight_Shoes
      - Item: S_Adoramus_Weapon
      - Item: S_Adoramus_Pendant
      - Item: S_Adoramus_Earing
      - Item: S_Judex_Armor
      - Item: S_Judex_Shield
      - Item: S_Judex_Shoes
      - Item: S_Magnus_Weapon
      - Item: S_Magnus_Pendant
      - Item: S_Magnus_Earing
      - Item: S_Rainstorm_Armor
      - Item: S_Rainstorm_Shield
      - Item: S_Rainstorm_Shoes
      - Item: S_Arrowvulcan_Weapon
      - Item: S_Arrowvulcan_Pendant
      - Item: S_Arrowvulcan_Earing
      - Item: S_Metalic_Armor
      - Item: S_Metalic_Shield
      - Item: S_Metalic_Shoes
      - Item: S_Reverberation_Weapon
      - Item: S_Reverberation_Pendant
      - Item: S_Reverberation_Earing
      - Item: S_Triangle_Armor
      - Item: S_Triangle_Shield
      - Item: S_Triangle_Shoes
      - Item: S_Shadowspell_Weapon
      - Item: S_Shadowspell_Pendant
      - Item: S_Shadowspell_Earing
      - Item: S_Menace_Armor
      - Item: S_Menace_Shield
      - Item: S_Menace_Shoes
      - Item: S_Paint_Weapon
      - Item: S_Paint_Pendant
      - Item: S_Paint_Earing
      - Item: S_Rolling_Armor
      - Item: S_Rolling_Shield
      - Item: S_Rolling_Shoes
      - Item: S_Katar_Weapon
      - Item: S_Katar_Pendant
      - Item: S_Katar_Earing
      - Item: S_Slash_Armor
      - Item: S_Slash_Shield
      - Item: S_Slash_Shoes
      - Item: S_Ripper_Weapon
      - Item: S_Ripper_Pendant
      - Item: S_Ripper_Earing
      - Item: S_Dust_Armor
      - Item: S_Dust_Shield
      - Item: S_Dust_Shoes
      - Item: S_Grave_Weapon
      - Item: S_Grave_Pendant
      - Item: S_Grave_Earing
      - Item: S_Psychic_Armor
      - Item: S_Psychic_Shield
      - Item: S_Psychic_Shoes
      - Item: S_Varetyr_Weapon
      - Item: S_Varetyr_Pendant
      - Item: S_Varetyr_Earing
      - Item: S_Jack_Armor
      - Item: S_Jack_Shield
      - Item: S_Jack_Shoes
      - Item: S_Strain_Weapon
      - Item: S_Strain_Pendant
      - Item: S_Strain_Earing
      - Item: S_Crimson_Armor
      - Item: S_Crimson_Shield
      - Item: S_Crimson_Shoes
      - Item: S_Chain_Weapon
      - Item: S_Chain_Pendant
      - Item: S_Chain_Earing
      - Item: S_Cart_Tornado_Armor
      - Item: S_Cart_Tornado_Shield
      - Item: S_Cart_Tornado_Shoes
      - Item: S_Cannon_Cart_Weapon
      - Item: S_Cannon_Cart_Pendant
      - Item: S_Cannon_Cart_Earing
      - Item: S_Spore_Bomb_Armor
      - Item: S_Spore_Bomb_Shield
      - Item: S_Spore_Bomb_Shoes
      - Item: S_Crazy_Weapon
      - Item: S_Crazy_Pendant
      - Item: S_Crazy_Earing
      - Item: S_Brand_Armor
      - Item: S_Brand_Shield
      - Item: S_Brand_Shoes
      - Item: S_Chain_Press_Weapon
      - Item: S_Chain_Press_Pendant
      - Item: S_Chain_Press_Earing
      - Item: S_Banish_Cannon_Armor
      - Item: S_Banish_Cannon_Shield
      - Item: S_Banish_Cannon_Shoes
      - Item: S_Genesis_Weapon
      - Item: S_Genesis_Pendant
      - Item: S_Genesis_Earing
      - Item: S_Tail_Dragon_Weapon
      - Item: S_Tail_Dragon_Shield
      - Item: S_Tail_Dragon_Armor
      - Item: S_Flare_Dance_Earing
      - Item: S_Flare_Dance_Pendant
      - Item: S_Flare_Dance_Shoes
      - Item: S_God_Hammer_Weapon
      - Item: S_God_Hammer_Shield
      - Item: S_God_Hammer_Armor
      - Item: S_Shatter_Buster_Earing
      - Item: S_Shatter_B_Pendant
      - Item: S_Shatter_Buster_Shoes
      - Item: S_Trip_Weapon
      - Item: S_Trip_Shield
      - Item: S_Trip_Armor
      - Item: S_Super_Magic_Shield
      - Item: S_Super_Magic_Armor
      - Item: S_Super_Magic_Shoes
      - Item: S_Super_Power_Weapon
      - Item: S_Super_Power_Pendant
      - Item: S_Super_Power_Earing
      - Item: S_Kunai_Weapon
      - Item: S_Kunai_Shield
      - Item: S_Kunai_Armor
      - Item: S_Syuriken_Earing
      - Item: S_Syuriken_Pendant
      - Item: S_Syuriken_Shoes
      - Item: S_Kamaenraku_Weapon
      - Item: S_Kamaenraku_Shield
      - Item: S_Kamaenraku_Armor
      - Item: S_Huusouka_Earing
      - Item: S_Huusouka_Pendant
      - Item: S_Huusouka_Shoes
      - Item: S_Pickyrush_Weapon
      - Item: S_Pickyrush_Shield
      - Item: S_Pickyrush_Armor
      - Item: S_SavageRabbit_Earing
      - Item: S_SavageRabbit_Pendant
      - Item: S_SavageRabbit_Shoes
      - Item: S_Catnip_Weapon
      - Item: S_Catnip_Shield
      - Item: S_Catnip_Armor
      - Item: S_Silvervine_Earing
      - Item: S_Silvervine_Pendant
      - Item: S_Silvervine_Shoes
      - Item: S_Sunshine_Weapon
      - Item: S_Sunshine_Shield
      - Item: S_Sunshine_Armor
      - Item: S_Moonlight_Earring
      - Item: S_Moonlight_Pendant
      - Item: S_Moonlight_Shoes
      - Item: S_Stardust_Weapon
      - Item: S_Stardust_Shield
      - Item: S_Stardust_Armor
      - Item: S_S_Weapon
      - Item: S_S_Shield
      - Item: S_S_Armor
      - Item: S_Evilcurse_Earring
      - Item: S_Evilcurse_Pendant
      - Item: S_Evilcurse_Shoes
      - Item: S_FullPene_Shoes
      - Item: S_FullPene_Armor
      - Item: S_FullPene_Pendant
      - Item: S_FullPene_Earring
      - Item: S_FullTemp_Earring
      - Item: S_FullTemp_Pendant
      - Item: S_FullTemp_Armor
      - Item: S_FullTemp_Shoes
      - Item: S_Mammoth_Armor
      - Item: S_Mammoth_Shoes
      - Item: S_Mammoth_Pendant
      - Item: S_Mammoth_Earring
      - Item: S_Mammoth_Weapon
      - Item: S_Mammoth_Shield
      - Item: S_TrueGem_Armor
      - Item: S_TrueGem_Shoes
      - Item: S_TrueGem_Earring
      - Item: S_TrueGem_Pendant
      - Item: S_M_Mammoth_Armor
      - Item: S_M_Mammoth_Shoes
      - Item: S_M_Mammoth_Earring
      - Item: S_M_Mammoth_Pendant
      - Item: S_EXP_Shield
      - Item: S_Absorb_Shield
      - Item: S_Absorb_Weapon
    Result: |
      callfunc("F_Lapine_Shadow_Refine_Hammer", .@refine);
      getitem2(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
  - Item: Shadow_9_Refine_Hammer
    NeedRefineMax: 8
    NotSocketEnchantItem: false
    TargetItem:
      - Item: T1_Shadow_Armor
      - Item: T1_Shadow_Weapon
      - Item: T1_Shadow_Shield
      - Item: T1_Shadow_Shoes
      - Item: T1_Shadow_R_Accessory
      - Item: T1_Shadow_L_Accessory
      - Item: T2_Shadow_Armor
      - Item: T2_Shadow_Weapon
      - Item: T2_Shadow_Shield
      - Item: T2_Shadow_Shoes
      - Item: T2_Shadow_R_Accessory
      - Item: T2_Shadow_L_Accessory
      - Item: S_Promotion_Weapon
      - Item: S_Promotion_Armor
      - Item: S_Promotion_Shoes
      - Item: S_Promotion_Shield
      - Item: S_Promotion_Earring
      - Item: S_Promotion_Pendant
      - Item: S_Physical_Earring
      - Item: S_Physical_Weapon
      - Item: S_Physical_Pendant
      - Item: S_Magical_Earring
      - Item: S_Magical_Weapon
      - Item: S_Magical_Pendant
      - Item: S_Breezy_Armor
      - Item: S_Champion_Shoes
      - Item: S_Athena_Shield
      - Item: S_Immune_Armor
      - Item: S_Hard_Armor
      - Item: S_Ancient_Armor
      - Item: S_Critical_Armor
      - Item: S_Kingbird_Weapon
      - Item: S_Cri_Hit_Weapon
      - Item: S_Healing_Weapon
      - Item: S_Lucky_Weapon
      - Item: S_Power_Earring
      - Item: S_Int_Pendant
      - Item: S_Dexterous_Armor
      - Item: S_Vital_Shoes
      - Item: S_Athletic_Shield
      - Item: S_Lucky_Armor
      - Item: S_Power_Pendant
      - Item: S_Int_Earring
      - Item: S_Dexterous_Weapon
      - Item: S_Vital_Shield
      - Item: S_Athletic_Shoes
      - Item: S_Resist_Spell_Pendant
      - Item: S_Rapid_Pendant
      - Item: S_Caster_Pendant
      - Item: S_Hard_Earring
      - Item: S_Wise_Earring
      - Item: S_Athena_Earring
      - Item: S_Cranial_Shield
      - Item: S_Safeguard_Shield
      - Item: S_Brutal_Shield
      - Item: S_Gargantua_Shield
      - Item: S_Homers_Shield
      - Item: S_Dragoon_Shield
      - Item: S_Satanic_Shield
      - Item: S_Flameguard_Shield
      - Item: S_Requiem_Shield
      - Item: S_Cadi_Shield
      - Item: S_Bloody_Shoes
      - Item: S_Liberation_Shoes
      - Item: S_Chemical_Shoes
      - Item: S_Clamorous_Shoes
      - Item: S_Insecticide_Shoes
      - Item: S_Fisher_Shoes
      - Item: S_Seraphim_Shoes
      - Item: S_Beholder_Shoes
      - Item: S_Divine_Shoes
      - Item: S_Dragoon_Shoes
      - Item: S_Big_Armor
      - Item: S_Medium_Armor
      - Item: S_Small_Armor
      - Item: S_Big_Weapon
      - Item: S_Medium_Weapon
      - Item: S_Small_Weapon
      - Item: S_Spiritual_Weapon
      - Item: S_Spiritual_Earring
      - Item: S_Spiritual_Pendent
      - Item: S_Malicious_Armor
      - Item: S_Malicious_Shoes
      - Item: S_Malicious_Shield
      - Item: S_Gemstone_Armor
      - Item: S_Gemstone_Shoes
      - Item: S_Gemstone_Shield
      - Item: S_Gemstone_Weapon
      - Item: S_Gemstone_Earring
      - Item: S_Gemstone_Pendent
      - Item: S_Stability_Shield
      - Item: S_Plasterer's_Armor
      - Item: S_Plasterer's_Shoes
      - Item: S_Insomniac_Armor
      - Item: S_Insomniac_Shoes
      - Item: S_Peerless_Armor
      - Item: S_Peerless_Shoes
      - Item: S_Adurate_Armor
      - Item: S_Adurate_Shoes
      - Item: Unfreez_Weapon_S
      - Item: Unfreeze_Earing_S
      - Item: Unfreeze_Pendent_S
      - Item: Vitality_Earing_S
      - Item: Vitality_Pendant_S
      - Item: S_Neutral_Weapon
      - Item: S_Neutral_Earring
      - Item: S_Neutral_Pendent
      - Item: S_Curse_Lift_Earring
      - Item: S_Curse_Lift_Pendent
      - Item: S_Caster_earring
      - Item: S_Caster_Weapon
      - Item: S_Spell_Flow_Shoes
      - Item: S_Spell_Flow_Armor
      - Item: S_Spell_Flow_Shield
      - Item: S_Greed_Armor
      - Item: S_Greed_Shoes
      - Item: S_Greed_Shield
      - Item: S_Greed_Weapon
      - Item: S_Greed_Earring
      - Item: S_Greed_Pendant
      - Item: S_Heal_Armor
      - Item: S_Heal_Shoes
      - Item: S_Heal_Shield
      - Item: S_Heal_Weapon
      - Item: S_Heal_Earring
      - Item: S_Heal_Pendant
      - Item: S_Hiding_Armor
      - Item: S_Hiding_Shoes
      - Item: S_Hiding_Shield
      - Item: S_Hiding_Weapon
      - Item: S_Hiding_Earring
      - Item: S_Hiding_Pendant
      - Item: S_Cloaking_Armor
      - Item: S_Cloaking_Shoes
      - Item: S_Cloaking_Shield
      - Item: S_Cloaking_Weapon
      - Item: S_Cloaking_Earring
      - Item: S_Cloaking_Pendant
      - Item: S_Teleport_Armor
      - Item: S_Teleport_Shoes
      - Item: S_Teleport_Shield
      - Item: S_Teleport_Weapon
      - Item: S_Teleport_Earring
      - Item: S_Teleport_Pendant
      - Item: S_Steal_Armor
      - Item: S_Steal_Shoes
      - Item: S_Steal_Shield
      - Item: S_Steal_Weapon
      - Item: S_Steal_Earring
      - Item: S_Steal_Pendant
      - Item: S_Infinity_Earring
      - Item: S_Infinity_Pendant
      - Item: S_Solid_Weapon
      - Item: S_Solid_Earring
      - Item: S_Immortal_Armor
      - Item: S_Immortal_Pendant
      - Item: S_Executioner_Weapon
      - Item: S_Exorcist_Weapon
      - Item: S_Hunting_Weapon
      - Item: S_Insect_Net_Weapon
      - Item: S_Fishing_Weapon
      - Item: S_Dragon_Killer_Weapon
      - Item: S_Corrupt_Weapon
      - Item: S_Vibration_Weapon
      - Item: S_Holy_Water_Weapon
      - Item: S_Scissors_Weapon
      - Item: S_Penetration_Earring
      - Item: S_Penetration_Pendent
      - Item: S_Tempest_Earring
      - Item: S_Tempest_Pendent
      - Item: S_M_Executioner_Weapon
      - Item: S_M_Exorcist_Weapon
      - Item: S_M_Hunting_Weapon
      - Item: S_M_Insect_Net_Weapon
      - Item: S_M_Fishing_Weapon
      - Item: S_M_Dragon_K_Weapon
      - Item: S_M_Corrupt_Weapon
      - Item: S_M_Vibration_Weapon
      - Item: S_M_Holy_Water_Weapon
      - Item: S_M_Scissors_Weapon
      - Item: S_Bearers_Armor
      - Item: S_Bearers_Shoes
      - Item: S_Bearers_Shield
      - Item: S_Bearers_Weapon
      - Item: S_Bearers_Earring
      - Item: S_Bearers_Pendent
      - Item: S_Basis_Armor
      - Item: S_Hallowed_Armor
      - Item: S_Saharic_Armor
      - Item: S_Underneath_Armor
      - Item: S_Flam_Armor
      - Item: S_Windy_Armor
      - Item: S_Envenom_Armor
      - Item: S_Damned_Armor
      - Item: S_Geist_Armor
      - Item: S_Divine_Armor
      - Item: S_Hasty_Shoes
      - Item: S_Hasty_Armor
      - Item: S_Basis_Shield
      - Item: S_Hallowed_Shield
      - Item: S_Saharic_Shield
      - Item: S_Underneath_Shield
      - Item: S_Flam_Shield
      - Item: S_Windy_Shield
      - Item: S_Envenom_Shield
      - Item: S_Damned_Shield
      - Item: S_Geist_Shield
      - Item: S_Divine_Shield
      - Item: S_Expert_Shoes
      - Item: S_Expert_Shield
      - Item: S_Beginner_Shoes
      - Item: S_Beginner_Shield
      - Item: S_Rookie_Shoes
      - Item: S_Rookie_Shield
      - Item: S_Advanced_Shoes
      - Item: S_Advanced_Shield
      - Item: S_Attack_Armor
      - Item: S_Blitz_Earring
      - Item: S_Blitz_Pendent
      - Item: S_ColdBolt_Armor
      - Item: S_FireBolt_Armor
      - Item: S_LightingBolt_Armor
      - Item: S_EarthSpike_Armor
      - Item: S_Enhance_Force_Weapon
      - Item: S_Force_Weapon
      - Item: S_Force_Earring
      - Item: S_Force_Pendant
      - Item: S_Enhance_Spirit_Weapon
      - Item: S_Spirit_Weapon
      - Item: S_Spirit_Earring
      - Item: S_Spirit_Pendant
      - Item: S_Blitz_Shoes
      - Item: S_Blitz_Shield
      - Item: S_Exceed_Weapon
      - Item: S_Titan_Earring
      - Item: S_Titan_Pendant
      - Item: S_Boned_Earring
      - Item: S_Boned_Pendant
      - Item: S_Gigantic_Earring
      - Item: S_Gigantic_Pendant
      - Item: S_Caster_Shoes
      - Item: S_Caster_Shield
      - Item: S_Caster_Armor
      - Item: S_Reload_Shoes
      - Item: S_Reload_Shield
      - Item: S_Reload_Armor
      - Item: S_Swordman_earring
      - Item: S_Merchant_earring
      - Item: S_Acolyte_earring
      - Item: S_Magician_earring
      - Item: S_Swordman_Pendant
      - Item: S_Merchant_Pendant
      - Item: S_Acolyte_Pendant
      - Item: S_Thief_Pendant
      - Item: S_Magician_Pendant
      - Item: S_Archer_Pendant
      - Item: S_Knight_Shoes
      - Item: S_Crusader_Shoes
      - Item: S_Blacksmith_Shoes
      - Item: S_Alchemist_Shoes
      - Item: S_Priest_Shoes
      - Item: S_Monk_Shoes
      - Item: S_Assassin_Shoes
      - Item: S_Rogue_Shoes
      - Item: S_Wizard_Shoes
      - Item: S_Sage_Shoes
      - Item: S_Hunter_Shoes
      - Item: S_Bard_Shoes
      - Item: S_Dancer_Shoes
      - Item: S_Knight_Armor
      - Item: S_Crusader_Armor
      - Item: S_Blacksmith_Armor
      - Item: S_Alchemist_Armor
      - Item: S_Priest_Armor
      - Item: S_Monk_Armor
      - Item: S_Assassin_Armor
      - Item: S_Rogue_Armor
      - Item: S_Wizard_Armor
      - Item: S_Sage_Armor
      - Item: S_Hunter_Armor
      - Item: S_Bard_Armor
      - Item: S_Dancer_Armor
      - Item: S_SuperNovice_Weapon
      - Item: S_Gunslinger_Weapon
      - Item: S_Taekwon_Weapon
      - Item: S_Ninja_Weapon
      - Item: S_DoramMagical_Weapon
      - Item: S_DoramPhysical_Weapon
      - Item: S_Runeknight_Weapon
      - Item: S_Royalguard_Weapon
      - Item: S_Mechanic_weapon
      - Item: S_Genetic_Weapon
      - Item: S_Archbishop_Weapon
      - Item: S_Sura_weapon
      - Item: S_Guillotine_Weapon
      - Item: S_Shadowchaser_Weapon
      - Item: S_Warlock_Weapon
      - Item: S_Sorcerer_Weapon
      - Item: S_Ranger_Weapon
      - Item: S_Minstrel_Weapon
      - Item: S_Wanderer_Weapon
      - Item: S_Runeknight_Shield
      - Item: S_Royalguard_Shield
      - Item: S_Mechanic_Shield
      - Item: S_Genetic_Shield
      - Item: S_Archbishop_Shield
      - Item: S_Sura_Shield
      - Item: S_Guillotine_Shield
      - Item: S_Shadowchaser_Shield
      - Item: S_Warlock_Shield
      - Item: S_Sorcerer_Shield
      - Item: S_Ranger_Shield
      - Item: S_Minstrel_Shield
      - Item: S_Wanderer_Shield
      - Item: S_Ninja_Shield
      - Item: S_Taekwon_Shield
      - Item: S_DoramPhysical_Shield
      - Item: S_DoramMagical_Shield
      - Item: S_SuperNovice_Shield
      - Item: S_Gunslinger_Shield
      - Item: S_Hasty_Shoes_II
      - Item: S_Bearer's_Pendant_II
      - Item: S_Gemstone_Earring_II
      - Item: S_Spellflow_Shield_II
      - Item: S_Spiritual_Weapon_II
      - Item: S_Malicious_Armor_II
      - Item: S_Sigrun_Armor
      - Item: S_Sigrun_Shield
      - Item: S_Force_Executioner_Weapon
      - Item: S_Spirit_Magic_Executioner_Weapon
      - Item: S_Caster_Armor_II
      - Item: S_Reload_Armor_II
      - Item: S_Critical_Shield
      - Item: S_Critical_Shoes
      - Item: S_Magic_Compose_Armor
      - Item: S_Gemstone_Weapon_II
      - Item: S_Gemstone_Shield_II
      - Item: S_Bearer's_Armor_II
      - Item: S_Bearer's_Shoes_II
      - Item: S_Almighty_Earring
      - Item: S_Almighty_Pendant
      - Item: S_All_Race_Shoes
      - Item: S_All_Race_Shield
      - Item: S_Blitz_Weapon
      - Item: S_Blitz_Armor
      - Item: S_Tempest_Shield
      - Item: S_Tempest_Shoes
      - Item: S_Magic_Executioner_Holy_Water_Armor
      - Item: S_Magic_Exorcist_Corrupted_Armor
      - Item: S_Magic_Vibration_Dragon_Killer_Armor
      - Item: S_Magic_Scissor_Hunting_Armor
      - Item: S_Magic_Fishing_Insect_Net_Armor
      - Item: S_Plasterer's_Armor_II
      - Item: S_Insomniac_Shoes_II
      - Item: S_Peerless_Armor_II
      - Item: S_Adulate_Shoes_II
      - Item: S_Unfreezing_Weapon_II
      - Item: S_Vitality_Earring_II
      - Item: S_Neutral_Weapon_II
      - Item: S_Uncursed_Pendant_II
      - Item: S_Tension_Weapon
      - Item: S_Tension_Earring
      - Item: S_Tension_Pendent
      - Item: S_Elegant_Weapon
      - Item: S_Elegant_Earring
      - Item: S_Elegant_Pendent
      - Item: S_Healing_Shield
      - Item: S_Healing_Shoes
      - Item: S_Restore_Earring
      - Item: S_Restore_Pendant
      - Item: S_Mortal_Blow_Weapon
      - Item: S_Mortal_Blow_Earring
      - Item: S_Mortal_Blow_Pendant
      - Item: S_Penetration_Shoes
      - Item: S_Penetration_Shield
      - Item: S_Executioner_Holy_Water_Armor
      - Item: S_Exorcist_Corrupted_Armor
      - Item: S_Vibration_Dragon_Killer_Armor
      - Item: S_Scissor_Hunting_Armor
      - Item: S_Fishing_Insect_Net_Armor
      - Item: Sentimental_Weapone_S
      - Item: Sentimental_Earring_S
      - Item: Sentimental_Pendant_S
      - Item: Enchanting_Weapone_S
      - Item: Enchanting_Earring_S
      - Item: Enchanting_Pendant_S
      - Item: S_Infinity_Weapon
      - Item: S_Physical_Shoes
      - Item: S_Physical_Shield
      - Item: S_Physical_Armor
      - Item: S_Magical_Shoes
      - Item: S_Magical_Shield
      - Item: S_Magical_Armor
      - Item: S_ImmunedAthena_Shield
      - Item: S_HardChamption_Shoes
      - Item: S_KingbirdAncient_Armor
      - Item: S_CriticalHit_Armor
      - Item: S_Thief_earring
      - Item: S_Archer_earring
      - Item: S_Rebellion_Armor
      - Item: S_Kagerou_Armor
      - Item: S_Oboro_Armor
      - Item: S_Rebellion_Shoes
      - Item: S_Kagerou_Shoes
      - Item: S_Oboro_Shoes
      - Item: S_DoramPhysical_Armor
      - Item: S_DoramPhysical_Shoes
      - Item: S_DoramMagical_Armor
      - Item: S_DoramMagical_Shoes
      - Item: S_Star_Emperor_Armor
      - Item: S_Star_Emperor_Shoes
      - Item: S_Soul_Reaper_Armor
      - Item: S_Soul_Reaper_Shoes
      - Item: S_Tempest_Weapon
      - Item: S_Tempest_Armor
      - Item: S_PerfectSize_Weapon
      - Item: S_PerfectSize_Armor
      - Item: S_M_Exo_Co_Weapon
      - Item: S_M_Viv_Dr_Weapon
      - Item: S_M_Sci_Hu_Weapon
      - Item: S_M_Fis_In_Weapon
      - Item: S_M_Exe_Ho_Weapon
      - Item: S_Penetration_Weapon
      - Item: S_Penetration_Armor
      - Item: S_Exe_Ho_Weapon
      - Item: S_Fis_In_Weapon
      - Item: S_Sci_Hu_Weapon
      - Item: S_Viv_Dr_Weapon
      - Item: S_Exo_Co_Weapon
      - Item: S_Hasty_Weapon
      - Item: S_Sonic_Armor
      - Item: S_Sonic_Shield
      - Item: S_Sonic_Shoes
      - Item: S_Ignition_Weapon
      - Item: S_Ignition_Pendant
      - Item: S_Ignition_Earing
      - Item: S_W_Breath_Armor
      - Item: S_W_Breath_Shield
      - Item: S_W_Breath_Shoes
      - Item: S_F_Breath_Weapon
      - Item: S_F_Breath_Pendant
      - Item: S_F_Breath_Earing
      - Item: S_Cluster_Armor
      - Item: S_Cluster_Shield
      - Item: S_Cluster_Shoes
      - Item: S_Aimed_Weapon
      - Item: S_Aimed_Pendant
      - Item: S_Aimed_Earing
      - Item: S_Arrow_Armor
      - Item: S_Arrow_Shield
      - Item: S_Arrow_Shoes
      - Item: S_Shooting_Weapon
      - Item: S_Shooting_Pendant
      - Item: S_Shooting_Earing
      - Item: S_Tornado_Armor
      - Item: S_Tornado_Shield
      - Item: S_Tornado_Shoes
      - Item: S_Boomerang_Weapon
      - Item: S_Boomerang_Pendant
      - Item: S_Boomerang_Earing
      - Item: S_Vulcan_Armor
      - Item: S_Vulcan_Shield
      - Item: S_Vulcan_Shoes
      - Item: S_Arms_Weapon
      - Item: S_Arms_Pendant
      - Item: S_Arms_Earing
      - Item: S_Rampage_Armor
      - Item: S_Rampage_Shield
      - Item: S_Rampage_Shoes
      - Item: S_Skynetblow_Weapon
      - Item: S_Skynetblow_Pendant
      - Item: S_Skynetblow_Earing
      - Item: S_Knucklearrow_Armor
      - Item: S_Knucklearrow_Shield
      - Item: S_Knucklearrow_Shoes
      - Item: S_TigerCannon_Weapon
      - Item: S_Tigercannon_Pendant
      - Item: S_Tigercannon_Earing
      - Item: S_Duplelight_Armor
      - Item: S_Duplelight_Shield
      - Item: S_Duplelight_Shoes
      - Item: S_Adoramus_Weapon
      - Item: S_Adoramus_Pendant
      - Item: S_Adoramus_Earing
      - Item: S_Judex_Armor
      - Item: S_Judex_Shield
      - Item: S_Judex_Shoes
      - Item: S_Magnus_Weapon
      - Item: S_Magnus_Pendant
      - Item: S_Magnus_Earing
      - Item: S_Rainstorm_Armor
      - Item: S_Rainstorm_Shield
      - Item: S_Rainstorm_Shoes
      - Item: S_Arrowvulcan_Weapon
      - Item: S_Arrowvulcan_Pendant
      - Item: S_Arrowvulcan_Earing
      - Item: S_Metalic_Armor
      - Item: S_Metalic_Shield
      - Item: S_Metalic_Shoes
      - Item: S_Reverberation_Weapon
      - Item: S_Reverberation_Pendant
      - Item: S_Reverberation_Earing
      - Item: S_Triangle_Armor
      - Item: S_Triangle_Shield
      - Item: S_Triangle_Shoes
      - Item: S_Shadowspell_Weapon
      - Item: S_Shadowspell_Pendant
      - Item: S_Shadowspell_Earing
      - Item: S_Menace_Armor
      - Item: S_Menace_Shield
      - Item: S_Menace_Shoes
      - Item: S_Paint_Weapon
      - Item: S_Paint_Pendant
      - Item: S_Paint_Earing
      - Item: S_Rolling_Armor
      - Item: S_Rolling_Shield
      - Item: S_Rolling_Shoes
      - Item: S_Katar_Weapon
      - Item: S_Katar_Pendant
      - Item: S_Katar_Earing
      - Item: S_Slash_Armor
      - Item: S_Slash_Shield
      - Item: S_Slash_Shoes
      - Item: S_Ripper_Weapon
      - Item: S_Ripper_Pendant
      - Item: S_Ripper_Earing
      - Item: S_Dust_Armor
      - Item: S_Dust_Shield
      - Item: S_Dust_Shoes
      - Item: S_Grave_Weapon
      - Item: S_Grave_Pendant
      - Item: S_Grave_Earing
      - Item: S_Psychic_Armor
      - Item: S_Psychic_Shield
      - Item: S_Psychic_Shoes
      - Item: S_Varetyr_Weapon
      - Item: S_Varetyr_Pendant
      - Item: S_Varetyr_Earing
      - Item: S_Jack_Armor
      - Item: S_Jack_Shield
      - Item: S_Jack_Shoes
      - Item: S_Strain_Weapon
      - Item: S_Strain_Pendant
      - Item: S_Strain_Earing
      - Item: S_Crimson_Armor
      - Item: S_Crimson_Shield
      - Item: S_Crimson_Shoes
      - Item: S_Chain_Weapon
      - Item: S_Chain_Pendant
      - Item: S_Chain_Earing
      - Item: S_Cart_Tornado_Armor
      - Item: S_Cart_Tornado_Shield
      - Item: S_Cart_Tornado_Shoes
      - Item: S_Cannon_Cart_Weapon
      - Item: S_Cannon_Cart_Pendant
      - Item: S_Cannon_Cart_Earing
      - Item: S_Spore_Bomb_Armor
      - Item: S_Spore_Bomb_Shield
      - Item: S_Spore_Bomb_Shoes
      - Item: S_Crazy_Weapon
      - Item: S_Crazy_Pendant
      - Item: S_Crazy_Earing
      - Item: S_Brand_Armor
      - Item: S_Brand_Shield
      - Item: S_Brand_Shoes
      - Item: S_Chain_Press_Weapon
      - Item: S_Chain_Press_Pendant
      - Item: S_Chain_Press_Earing
      - Item: S_Banish_Cannon_Armor
      - Item: S_Banish_Cannon_Shield
      - Item: S_Banish_Cannon_Shoes
      - Item: S_Genesis_Weapon
      - Item: S_Genesis_Pendant
      - Item: S_Genesis_Earing
      - Item: S_Tail_Dragon_Weapon
      - Item: S_Tail_Dragon_Shield
      - Item: S_Tail_Dragon_Armor
      - Item: S_Flare_Dance_Earing
      - Item: S_Flare_Dance_Pendant
      - Item: S_Flare_Dance_Shoes
      - Item: S_God_Hammer_Weapon
      - Item: S_God_Hammer_Shield
      - Item: S_God_Hammer_Armor
      - Item: S_Shatter_Buster_Earing
      - Item: S_Shatter_B_Pendant
      - Item: S_Shatter_Buster_Shoes
      - Item: S_Trip_Weapon
      - Item: S_Trip_Shield
      - Item: S_Trip_Armor
      - Item: S_Super_Magic_Shield
      - Item: S_Super_Magic_Armor
      - Item: S_Super_Magic_Shoes
      - Item: S_Super_Power_Weapon
      - Item: S_Super_Power_Pendant
      - Item: S_Super_Power_Earing
      - Item: S_Kunai_Weapon
      - Item: S_Kunai_Shield
      - Item: S_Kunai_Armor
      - Item: S_Syuriken_Earing
      - Item: S_Syuriken_Pendant
      - Item: S_Syuriken_Shoes
      - Item: S_Kamaenraku_Weapon
      - Item: S_Kamaenraku_Shield
      - Item: S_Kamaenraku_Armor
      - Item: S_Huusouka_Earing
      - Item: S_Huusouka_Pendant
      - Item: S_Huusouka_Shoes
      - Item: S_Pickyrush_Weapon
      - Item: S_Pickyrush_Shield
      - Item: S_Pickyrush_Armor
      - Item: S_SavageRabbit_Earing
      - Item: S_SavageRabbit_Pendant
      - Item: S_SavageRabbit_Shoes
      - Item: S_Catnip_Weapon
      - Item: S_Catnip_Shield
      - Item: S_Catnip_Armor
      - Item: S_Silvervine_Earing
      - Item: S_Silvervine_Pendant
      - Item: S_Silvervine_Shoes
      - Item: S_Sunshine_Weapon
      - Item: S_Sunshine_Shield
      - Item: S_Sunshine_Armor
      - Item: S_Moonlight_Earring
      - Item: S_Moonlight_Pendant
      - Item: S_Moonlight_Shoes
      - Item: S_Stardust_Weapon
      - Item: S_Stardust_Shield
      - Item: S_Stardust_Armor
      - Item: S_S_Weapon
      - Item: S_S_Shield
      - Item: S_S_Armor
      - Item: S_Evilcurse_Earring
      - Item: S_Evilcurse_Pendant
      - Item: S_Evilcurse_Shoes
      - Item: S_FullPene_Shoes
      - Item: S_FullPene_Armor
      - Item: S_FullPene_Pendant
      - Item: S_FullPene_Earring
      - Item: S_FullTemp_Earring
      - Item: S_FullTemp_Pendant
      - Item: S_FullTemp_Armor
      - Item: S_FullTemp_Shoes
      - Item: S_Mammoth_Armor
      - Item: S_Mammoth_Shoes
      - Item: S_Mammoth_Pendant
      - Item: S_Mammoth_Earring
      - Item: S_Mammoth_Weapon
      - Item: S_Mammoth_Shield
      - Item: S_TrueGem_Armor
      - Item: S_TrueGem_Shoes
      - Item: S_TrueGem_Earring
      - Item: S_TrueGem_Pendant
      - Item: S_M_Mammoth_Armor
      - Item: S_M_Mammoth_Shoes
      - Item: S_M_Mammoth_Earring
      - Item: S_M_Mammoth_Pendant
      - Item: S_EXP_Shield
      - Item: S_Absorb_Shield
      - Item: S_Absorb_Weapon
    Result: |
      callfunc("F_Lapine_Shadow_9_Refine_Hammer", .@refine);
      getitem2(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
  - Item: Magic_Cat_hand_Scroll
    TargetItem:
      - Item: Neko_Headress
    Result: |
      callfunc("F_Lapine_Magic_Cat_Hand", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,0,0,0,0,0,0,.@opts,.@vals,.@params);
  - Item: Candy_Pouch_Blessing_Scroll_Melee
    TargetItem:
      - Item: Bag_Of_Antonio_P
    Result: |
      callfunc("F_Lapine_Candy_Pouch_Blessing_Scroll_W", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Candy_Pouch_Blessing_Scroll_Range
    TargetItem:
      - Item: Bag_Of_Antonio_S
    Result: |
      callfunc("F_Lapine_Candy_Pouch_Blessing_Scroll_R", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Candy_Pouch_Blessing_Scroll_Magic
    TargetItem:
      - Item: Bag_Of_Antonio_
    Result: |
      callfunc("F_Lapine_Candy_Pouch_Blessing_Scroll_M", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Drooping_Gunslinger_Scroll
    TargetItem:
      - Item: Drooping_Rebellion_
    Result: |
      callfunc("F_Lapine_Grown_Gunslinger", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Scroll_of_Fallen_Angel_Wings
    TargetItem:
      - Item: Fallen_Angel_Wings_
      - Item: Fallen_Angel_Wing
    Result: |
      if (@last_lapine_card1) {
          getitem(@last_lapine_card1,1);
      }
      getitem2(@last_lapine_id,1,1,0,0,0,0,0,0);
  - Item: Uniform_Repair_Kit
    TargetItem:
      - Item: Kafra_Uniform
    Result: |
      callfunc("F_Lapine_Uniform_Repair_Kits", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
       getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Shadow_Random_Mix
    NeedRefineMin: 7
    TargetItem:
      - Item: T1_Shadow_Armor
      - Item: T1_Shadow_Weapon
      - Item: T1_Shadow_Shield
      - Item: T1_Shadow_Shoes
      - Item: T1_Shadow_R_Accessory
      - Item: T1_Shadow_L_Accessory
      - Item: T2_Shadow_Armor
      - Item: T2_Shadow_Weapon
      - Item: T2_Shadow_Shield
      - Item: T2_Shadow_Shoes
      - Item: T2_Shadow_R_Accessory
      - Item: T2_Shadow_L_Accessory
      - Item: S_Promotion_Weapon
      - Item: S_Promotion_Armor
      - Item: S_Promotion_Shoes
      - Item: S_Promotion_Shield
      - Item: S_Promotion_Earring
      - Item: S_Promotion_Pendant
      - Item: S_Physical_Earring
      - Item: S_Physical_Weapon
      - Item: S_Physical_Pendant
      - Item: S_Magical_Earring
      - Item: S_Magical_Weapon
      - Item: S_Magical_Pendant
      - Item: S_Breezy_Armor
      - Item: S_Champion_Shoes
      - Item: S_Athena_Shield
      - Item: S_Immune_Armor
      - Item: S_Hard_Armor
      - Item: S_Ancient_Armor
      - Item: S_Critical_Armor
      - Item: S_Kingbird_Weapon
      - Item: S_Cri_Hit_Weapon
      - Item: S_Healing_Weapon
      - Item: S_Lucky_Weapon
      - Item: S_Power_Earring
      - Item: S_Int_Pendant
      - Item: S_Dexterous_Armor
      - Item: S_Vital_Shoes
      - Item: S_Athletic_Shield
      - Item: S_Lucky_Armor
      - Item: S_Power_Pendant
      - Item: S_Int_Earring
      - Item: S_Dexterous_Weapon
      - Item: S_Vital_Shield
      - Item: S_Athletic_Shoes
      - Item: S_Resist_Spell_Pendant
      - Item: S_Rapid_Pendant
      - Item: S_Caster_Pendant
      - Item: S_Hard_Earring
      - Item: S_Wise_Earring
      - Item: S_Athena_Earring
      - Item: S_Cranial_Shield
      - Item: S_Safeguard_Shield
      - Item: S_Brutal_Shield
      - Item: S_Gargantua_Shield
      - Item: S_Homers_Shield
      - Item: S_Dragoon_Shield
      - Item: S_Satanic_Shield
      - Item: S_Flameguard_Shield
      - Item: S_Requiem_Shield
      - Item: S_Cadi_Shield
      - Item: S_Bloody_Shoes
      - Item: S_Liberation_Shoes
      - Item: S_Chemical_Shoes
      - Item: S_Clamorous_Shoes
      - Item: S_Insecticide_Shoes
      - Item: S_Fisher_Shoes
      - Item: S_Seraphim_Shoes
      - Item: S_Beholder_Shoes
      - Item: S_Divine_Shoes
      - Item: S_Dragoon_Shoes
      - Item: S_Big_Armor
      - Item: S_Medium_Armor
      - Item: S_Small_Armor
      - Item: S_Big_Weapon
      - Item: S_Medium_Weapon
      - Item: S_Small_Weapon
      - Item: S_Spiritual_Weapon
      - Item: S_Spiritual_Earring
      - Item: S_Spiritual_Pendent
      - Item: S_Malicious_Armor
      - Item: S_Malicious_Shoes
      - Item: S_Malicious_Shield
      - Item: S_Gemstone_Armor
      - Item: S_Gemstone_Shoes
      - Item: S_Gemstone_Shield
      - Item: S_Gemstone_Weapon
      - Item: S_Gemstone_Earring
      - Item: S_Gemstone_Pendent
      - Item: S_Stability_Shield
      - Item: S_Plasterer's_Armor
      - Item: S_Plasterer's_Shoes
      - Item: S_Insomniac_Armor
      - Item: S_Insomniac_Shoes
      - Item: S_Peerless_Armor
      - Item: S_Peerless_Shoes
      - Item: S_Adurate_Armor
      - Item: S_Adurate_Shoes
      - Item: Unfreez_Weapon_S
      - Item: Unfreeze_Earing_S
      - Item: Unfreeze_Pendent_S
      - Item: Vitality_Earing_S
      - Item: Vitality_Pendant_S
      - Item: S_Neutral_Weapon
      - Item: S_Neutral_Earring
      - Item: S_Neutral_Pendent
      - Item: S_Curse_Lift_Earring
      - Item: S_Curse_Lift_Pendent
      - Item: S_Caster_earring
      - Item: S_Caster_Weapon
      - Item: S_Spell_Flow_Shoes
      - Item: S_Spell_Flow_Armor
      - Item: S_Spell_Flow_Shield
      - Item: S_Greed_Armor
      - Item: S_Greed_Shoes
      - Item: S_Greed_Shield
      - Item: S_Greed_Weapon
      - Item: S_Greed_Earring
      - Item: S_Greed_Pendant
      - Item: S_Heal_Armor
      - Item: S_Heal_Shoes
      - Item: S_Heal_Shield
      - Item: S_Heal_Weapon
      - Item: S_Heal_Earring
      - Item: S_Heal_Pendant
      - Item: S_Hiding_Armor
      - Item: S_Hiding_Shoes
      - Item: S_Hiding_Shield
      - Item: S_Hiding_Weapon
      - Item: S_Hiding_Earring
      - Item: S_Hiding_Pendant
      - Item: S_Cloaking_Armor
      - Item: S_Cloaking_Shoes
      - Item: S_Cloaking_Shield
      - Item: S_Cloaking_Weapon
      - Item: S_Cloaking_Earring
      - Item: S_Cloaking_Pendant
      - Item: S_Teleport_Armor
      - Item: S_Teleport_Shoes
      - Item: S_Teleport_Shield
      - Item: S_Teleport_Weapon
      - Item: S_Teleport_Earring
      - Item: S_Teleport_Pendant
      - Item: S_Steal_Armor
      - Item: S_Steal_Shoes
      - Item: S_Steal_Shield
      - Item: S_Steal_Weapon
      - Item: S_Steal_Earring
      - Item: S_Steal_Pendant
      - Item: S_Infinity_Earring
      - Item: S_Infinity_Pendant
      - Item: S_Solid_Weapon
      - Item: S_Solid_Earring
      - Item: S_Immortal_Armor
      - Item: S_Immortal_Pendant
      - Item: S_Executioner_Weapon
      - Item: S_Exorcist_Weapon
      - Item: S_Hunting_Weapon
      - Item: S_Insect_Net_Weapon
      - Item: S_Fishing_Weapon
      - Item: S_Dragon_Killer_Weapon
      - Item: S_Corrupt_Weapon
      - Item: S_Vibration_Weapon
      - Item: S_Holy_Water_Weapon
      - Item: S_Scissors_Weapon
      - Item: S_Penetration_Earring
      - Item: S_Penetration_Pendent
      - Item: S_Tempest_Earring
      - Item: S_Tempest_Pendent
      - Item: S_M_Executioner_Weapon
      - Item: S_M_Exorcist_Weapon
      - Item: S_M_Hunting_Weapon
      - Item: S_M_Insect_Net_Weapon
      - Item: S_M_Fishing_Weapon
      - Item: S_M_Dragon_K_Weapon
      - Item: S_M_Corrupt_Weapon
      - Item: S_M_Vibration_Weapon
      - Item: S_M_Holy_Water_Weapon
      - Item: S_M_Scissors_Weapon
      - Item: S_Bearers_Armor
      - Item: S_Bearers_Shoes
      - Item: S_Bearers_Shield
      - Item: S_Bearers_Weapon
      - Item: S_Bearers_Earring
      - Item: S_Bearers_Pendent
      - Item: S_Basis_Armor
      - Item: S_Hallowed_Armor
      - Item: S_Saharic_Armor
      - Item: S_Underneath_Armor
      - Item: S_Flam_Armor
      - Item: S_Windy_Armor
      - Item: S_Envenom_Armor
      - Item: S_Damned_Armor
      - Item: S_Geist_Armor
      - Item: S_Divine_Armor
      - Item: S_Hasty_Shoes
      - Item: S_Hasty_Armor
      - Item: S_Basis_Shield
      - Item: S_Hallowed_Shield
      - Item: S_Saharic_Shield
      - Item: S_Underneath_Shield
      - Item: S_Flam_Shield
      - Item: S_Windy_Shield
      - Item: S_Envenom_Shield
      - Item: S_Damned_Shield
      - Item: S_Geist_Shield
      - Item: S_Divine_Shield
      - Item: S_Expert_Shoes
      - Item: S_Expert_Shield
      - Item: S_Beginner_Shoes
      - Item: S_Beginner_Shield
      - Item: S_Rookie_Shoes
      - Item: S_Rookie_Shield
      - Item: S_Advanced_Shoes
      - Item: S_Advanced_Shield
      - Item: S_Attack_Armor
      - Item: S_Blitz_Earring
      - Item: S_Blitz_Pendent
      - Item: S_ColdBolt_Armor
      - Item: S_FireBolt_Armor
      - Item: S_LightingBolt_Armor
      - Item: S_EarthSpike_Armor
      - Item: S_Enhance_Force_Weapon
      - Item: S_Force_Weapon
      - Item: S_Force_Earring
      - Item: S_Force_Pendant
      - Item: S_Enhance_Spirit_Weapon
      - Item: S_Spirit_Weapon
      - Item: S_Spirit_Earring
      - Item: S_Spirit_Pendant
      - Item: S_Blitz_Shoes
      - Item: S_Blitz_Shield
      - Item: S_Exceed_Weapon
      - Item: S_Titan_Earring
      - Item: S_Titan_Pendant
      - Item: S_Boned_Earring
      - Item: S_Boned_Pendant
      - Item: S_Gigantic_Earring
      - Item: S_Gigantic_Pendant
      - Item: S_Caster_Shoes
      - Item: S_Caster_Shield
      - Item: S_Caster_Armor
      - Item: S_Reload_Shoes
      - Item: S_Reload_Shield
      - Item: S_Reload_Armor
      - Item: S_Hasty_Shoes_II
      - Item: S_Bearer's_Pendant_II
      - Item: S_Gemstone_Earring_II
      - Item: S_Spellflow_Shield_II
      - Item: S_Spiritual_Weapon_II
      - Item: S_Malicious_Armor_II
      - Item: S_Sigrun_Armor
      - Item: S_Sigrun_Shield
      - Item: S_Force_Executioner_Weapon
      - Item: S_Spirit_Magic_Executioner_Weapon
      - Item: S_Caster_Armor_II
      - Item: S_Reload_Armor_II
      - Item: S_Critical_Shield
      - Item: S_Critical_Shoes
      - Item: S_Magic_Compose_Armor
      - Item: S_Gemstone_Weapon_II
      - Item: S_Gemstone_Shield_II
      - Item: S_Bearer's_Armor_II
      - Item: S_Bearer's_Shoes_II
      - Item: S_Almighty_Earring
      - Item: S_Almighty_Pendant
      - Item: S_All_Race_Shoes
      - Item: S_All_Race_Shield
      - Item: S_Blitz_Weapon
      - Item: S_Blitz_Armor
      - Item: S_Tempest_Shield
      - Item: S_Tempest_Shoes
      - Item: S_Magic_Executioner_Holy_Water_Armor
      - Item: S_Magic_Exorcist_Corrupted_Armor
      - Item: S_Magic_Vibration_Dragon_Killer_Armor
      - Item: S_Magic_Scissor_Hunting_Armor
      - Item: S_Magic_Fishing_Insect_Net_Armor
      - Item: S_Plasterer's_Armor_II
      - Item: S_Insomniac_Shoes_II
      - Item: S_Peerless_Armor_II
      - Item: S_Adulate_Shoes_II
      - Item: S_Unfreezing_Weapon_II
      - Item: S_Vitality_Earring_II
      - Item: S_Neutral_Weapon_II
      - Item: S_Uncursed_Pendant_II
      - Item: S_Tension_Weapon
      - Item: S_Tension_Earring
      - Item: S_Tension_Pendent
      - Item: S_Elegant_Weapon
      - Item: S_Elegant_Earring
      - Item: S_Elegant_Pendent
      - Item: S_Healing_Shield
      - Item: S_Healing_Shoes
      - Item: S_Restore_Earring
      - Item: S_Restore_Pendant
      - Item: S_Mortal_Blow_Weapon
      - Item: S_Mortal_Blow_Earring
      - Item: S_Mortal_Blow_Pendant
      - Item: S_Penetration_Shoes
      - Item: S_Penetration_Shield
      - Item: S_Executioner_Holy_Water_Armor
      - Item: S_Exorcist_Corrupted_Armor
      - Item: S_Vibration_Dragon_Killer_Armor
      - Item: S_Scissor_Hunting_Armor
      - Item: S_Fishing_Insect_Net_Armor
      - Item: Sentimental_Weapone_S
      - Item: Sentimental_Earring_S
      - Item: Sentimental_Pendant_S
      - Item: Enchanting_Weapone_S
      - Item: Enchanting_Earring_S
      - Item: Enchanting_Pendant_S
      - Item: S_Infinity_Weapon
      - Item: S_Physical_Shoes
      - Item: S_Physical_Shield
      - Item: S_Physical_Armor
      - Item: S_Magical_Shoes
      - Item: S_Magical_Shield
      - Item: S_Magical_Armor
      - Item: S_ImmunedAthena_Shield
      - Item: S_HardChamption_Shoes
      - Item: S_KingbirdAncient_Armor
      - Item: S_CriticalHit_Armor
      - Item: S_Tempest_Weapon
      - Item: S_Tempest_Armor
      - Item: S_PerfectSize_Weapon
      - Item: S_PerfectSize_Armor
      - Item: S_M_Exo_Co_Weapon
      - Item: S_M_Viv_Dr_Weapon
      - Item: S_M_Sci_Hu_Weapon
      - Item: S_M_Fis_In_Weapon
      - Item: S_M_Exe_Ho_Weapon
      - Item: S_Penetration_Weapon
      - Item: S_Penetration_Armor
      - Item: S_Exe_Ho_Weapon
      - Item: S_Fis_In_Weapon
      - Item: S_Sci_Hu_Weapon
      - Item: S_Viv_Dr_Weapon
      - Item: S_Exo_Co_Weapon
      - Item: S_Hasty_Weapon
      - Item: S_Sonic_Armor
      - Item: S_Sonic_Shield
      - Item: S_Sonic_Shoes
      - Item: S_Ignition_Weapon
      - Item: S_Ignition_Pendant
      - Item: S_Ignition_Earing
      - Item: S_W_Breath_Armor
      - Item: S_W_Breath_Shield
      - Item: S_W_Breath_Shoes
      - Item: S_F_Breath_Weapon
      - Item: S_F_Breath_Pendant
      - Item: S_F_Breath_Earing
      - Item: S_Cluster_Armor
      - Item: S_Cluster_Shield
      - Item: S_Cluster_Shoes
      - Item: S_Aimed_Weapon
      - Item: S_Aimed_Pendant
      - Item: S_Aimed_Earing
      - Item: S_Arrow_Armor
      - Item: S_Arrow_Shield
      - Item: S_Arrow_Shoes
      - Item: S_Shooting_Weapon
      - Item: S_Shooting_Pendant
      - Item: S_Shooting_Earing
      - Item: S_Tornado_Armor
      - Item: S_Tornado_Shield
      - Item: S_Tornado_Shoes
      - Item: S_Boomerang_Weapon
      - Item: S_Boomerang_Pendant
      - Item: S_Boomerang_Earing
      - Item: S_Vulcan_Armor
      - Item: S_Vulcan_Shield
      - Item: S_Vulcan_Shoes
      - Item: S_Arms_Weapon
      - Item: S_Arms_Pendant
      - Item: S_Arms_Earing
      - Item: S_Rampage_Armor
      - Item: S_Rampage_Shield
      - Item: S_Rampage_Shoes
      - Item: S_Skynetblow_Weapon
      - Item: S_Skynetblow_Pendant
      - Item: S_Skynetblow_Earing
      - Item: S_Knucklearrow_Armor
      - Item: S_Knucklearrow_Shield
      - Item: S_Knucklearrow_Shoes
      - Item: S_TigerCannon_Weapon
      - Item: S_Tigercannon_Pendant
      - Item: S_Tigercannon_Earing
      - Item: S_Duplelight_Armor
      - Item: S_Duplelight_Shield
      - Item: S_Duplelight_Shoes
      - Item: S_Adoramus_Weapon
      - Item: S_Adoramus_Pendant
      - Item: S_Adoramus_Earing
      - Item: S_Judex_Armor
      - Item: S_Judex_Shield
      - Item: S_Judex_Shoes
      - Item: S_Magnus_Weapon
      - Item: S_Magnus_Pendant
      - Item: S_Magnus_Earing
      - Item: S_Rainstorm_Armor
      - Item: S_Rainstorm_Shield
      - Item: S_Rainstorm_Shoes
      - Item: S_Arrowvulcan_Weapon
      - Item: S_Arrowvulcan_Pendant
      - Item: S_Arrowvulcan_Earing
      - Item: S_Metalic_Armor
      - Item: S_Metalic_Shield
      - Item: S_Metalic_Shoes
      - Item: S_Reverberation_Weapon
      - Item: S_Reverberation_Pendant
      - Item: S_Reverberation_Earing
      - Item: S_Triangle_Armor
      - Item: S_Triangle_Shield
      - Item: S_Triangle_Shoes
      - Item: S_Shadowspell_Weapon
      - Item: S_Shadowspell_Pendant
      - Item: S_Shadowspell_Earing
      - Item: S_Menace_Armor
      - Item: S_Menace_Shield
      - Item: S_Menace_Shoes
      - Item: S_Paint_Weapon
      - Item: S_Paint_Pendant
      - Item: S_Paint_Earing
      - Item: S_Rolling_Armor
      - Item: S_Rolling_Shield
      - Item: S_Rolling_Shoes
      - Item: S_Katar_Weapon
      - Item: S_Katar_Pendant
      - Item: S_Katar_Earing
      - Item: S_Slash_Armor
      - Item: S_Slash_Shield
      - Item: S_Slash_Shoes
      - Item: S_Ripper_Weapon
      - Item: S_Ripper_Pendant
      - Item: S_Ripper_Earing
      - Item: S_Dust_Armor
      - Item: S_Dust_Shield
      - Item: S_Dust_Shoes
      - Item: S_Grave_Weapon
      - Item: S_Grave_Pendant
      - Item: S_Grave_Earing
      - Item: S_Psychic_Armor
      - Item: S_Psychic_Shield
      - Item: S_Psychic_Shoes
      - Item: S_Varetyr_Weapon
      - Item: S_Varetyr_Pendant
      - Item: S_Varetyr_Earing
      - Item: S_Jack_Armor
      - Item: S_Jack_Shield
      - Item: S_Jack_Shoes
      - Item: S_Strain_Weapon
      - Item: S_Strain_Pendant
      - Item: S_Strain_Earing
      - Item: S_Crimson_Armor
      - Item: S_Crimson_Shield
      - Item: S_Crimson_Shoes
      - Item: S_Chain_Weapon
      - Item: S_Chain_Pendant
      - Item: S_Chain_Earing
      - Item: S_Cart_Tornado_Armor
      - Item: S_Cart_Tornado_Shield
      - Item: S_Cart_Tornado_Shoes
      - Item: S_Cannon_Cart_Weapon
      - Item: S_Cannon_Cart_Pendant
      - Item: S_Cannon_Cart_Earing
      - Item: S_Spore_Bomb_Armor
      - Item: S_Spore_Bomb_Shield
      - Item: S_Spore_Bomb_Shoes
      - Item: S_Crazy_Weapon
      - Item: S_Crazy_Pendant
      - Item: S_Crazy_Earing
      - Item: S_Brand_Armor
      - Item: S_Brand_Shield
      - Item: S_Brand_Shoes
      - Item: S_Chain_Press_Weapon
      - Item: S_Chain_Press_Pendant
      - Item: S_Chain_Press_Earing
      - Item: S_Banish_Cannon_Armor
      - Item: S_Banish_Cannon_Shield
      - Item: S_Banish_Cannon_Shoes
      - Item: S_Genesis_Weapon
      - Item: S_Genesis_Pendant
      - Item: S_Genesis_Earing
      - Item: S_Tail_Dragon_Weapon
      - Item: S_Tail_Dragon_Shield
      - Item: S_Tail_Dragon_Armor
      - Item: S_Flare_Dance_Earing
      - Item: S_Flare_Dance_Pendant
      - Item: S_Flare_Dance_Shoes
      - Item: S_God_Hammer_Weapon
      - Item: S_God_Hammer_Shield
      - Item: S_God_Hammer_Armor
      - Item: S_Shatter_Buster_Earing
      - Item: S_Shatter_B_Pendant
      - Item: S_Shatter_Buster_Shoes
      - Item: S_Trip_Weapon
      - Item: S_Trip_Shield
      - Item: S_Trip_Armor
      - Item: S_Super_Magic_Shield
      - Item: S_Super_Magic_Armor
      - Item: S_Super_Magic_Shoes
      - Item: S_Super_Power_Weapon
      - Item: S_Super_Power_Pendant
      - Item: S_Super_Power_Earing
      - Item: S_Kunai_Weapon
      - Item: S_Kunai_Shield
      - Item: S_Kunai_Armor
      - Item: S_Syuriken_Earing
      - Item: S_Syuriken_Pendant
      - Item: S_Syuriken_Shoes
      - Item: S_Kamaenraku_Weapon
      - Item: S_Kamaenraku_Shield
      - Item: S_Kamaenraku_Armor
      - Item: S_Huusouka_Earing
      - Item: S_Huusouka_Pendant
      - Item: S_Huusouka_Shoes
      - Item: S_Pickyrush_Weapon
      - Item: S_Pickyrush_Shield
      - Item: S_Pickyrush_Armor
      - Item: S_SavageRabbit_Earing
      - Item: S_SavageRabbit_Pendant
      - Item: S_SavageRabbit_Shoes
      - Item: S_Catnip_Weapon
      - Item: S_Catnip_Shield
      - Item: S_Catnip_Armor
      - Item: S_Silvervine_Earing
      - Item: S_Silvervine_Pendant
      - Item: S_Silvervine_Shoes
      - Item: S_Sunshine_Weapon
      - Item: S_Sunshine_Shield
      - Item: S_Sunshine_Armor
      - Item: S_Moonlight_Earring
      - Item: S_Moonlight_Pendant
      - Item: S_Moonlight_Shoes
      - Item: S_Stardust_Weapon
      - Item: S_Stardust_Shield
      - Item: S_Stardust_Armor
      - Item: S_S_Weapon
      - Item: S_S_Shield
      - Item: S_S_Armor
      - Item: S_Evilcurse_Earring
      - Item: S_Evilcurse_Pendant
      - Item: S_Evilcurse_Shoes
      - Item: S_FullPene_Shoes
      - Item: S_FullPene_Armor
      - Item: S_FullPene_Pendant
      - Item: S_FullPene_Earring
      - Item: S_FullTemp_Earring
      - Item: S_FullTemp_Pendant
      - Item: S_FullTemp_Armor
      - Item: S_FullTemp_Shoes
      - Item: S_Mammoth_Armor
      - Item: S_Mammoth_Shoes
      - Item: S_Mammoth_Pendant
      - Item: S_Mammoth_Earring
      - Item: S_Mammoth_Weapon
      - Item: S_Mammoth_Shield
      - Item: S_TrueGem_Armor
      - Item: S_TrueGem_Shoes
      - Item: S_TrueGem_Earring
      - Item: S_TrueGem_Pendant
      - Item: S_M_Mammoth_Armor
      - Item: S_M_Mammoth_Shoes
      - Item: S_M_Mammoth_Earring
      - Item: S_M_Mammoth_Pendant
      - Item: S_EXP_Shield
      - Item: S_Absorb_Shield
      - Item: S_Absorb_Weapon
    Result: |
      callfunc("F_Lapine_Shadow_Random_Mix", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Boost_Up_1
    NeedRefineMax: 9
    NotSocketEnchantItem: false
    TargetItem:
      - Item: Atker_Plate
      - Item: Atker_Manteau
      - Item: Atker_Greave
      - Item: Ran_Suits
      - Item: Ran_Manteau
      - Item: Ran_Boots
      - Item: Ele_Robe
      - Item: Ele_Muffler
      - Item: Ele_Shoes
      - Item: Defn_Robe
      - Item: Defn_Muffler
      - Item: Defn_Shoes
    Result: |
      callfunc("F_Lapine_Boost_Up_1", .@refine);
      getitem2(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
  - Item: Boost_Up_2
    NotSocketEnchantItem: false
    TargetItem:
      - Item: Boost_TH_Sword
      - Item: Boost_Katar
      - Item: Boost_Hall
      - Item: Boost_Staff
      - Item: Boost_Bow
      - Item: Boost_Spear
      - Item: Boost_Sword
      - Item: Boost_Dagger
      - Item: Boost_Spl_Book
      - Item: Boost_Guitar
      - Item: Boost_Knuckle
      - Item: Boost_Whip
      - Item: Boost_Nindo
      - Item: Boost_Gatling
      - Item: Boost_Axe
      - Item: Boost_Text
      - Item: Boost_Soul_Rod
      - Item: Boost_Foxtail
    Result: |
      callfunc("F_Lapine_Boost_Up_2", .@refine);
      getitem2(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
  - Item: Metal_Rifine_Ticket
    NotSocketEnchantItem: false
    TargetItem:
      - Item: Metal_Katar
      - Item: Metal_Two_Handed_Axe
      - Item: Metal_Lance
      - Item: Metal_Book
      - Item: Metal_Staff
      - Item: Metal_Dagger
      - Item: Metal_Mace
      - Item: Metal_Bow
      - Item: Metal_Two_Hand_Sword
      - Item: Metal_Revolver
      - Item: Huuma_Metal_Shuriken
      - Item: Metal_Foxtail
    Result: |
      callfunc("F_Lapine_Metal_Rifine_Ticket", .@refine);
      getitem2(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
  - Item: Noblesse_Rifine_Ticket
    NotSocketEnchantItem: false
    TargetItem:
      - Item: Noblesse_Breath_Armor
      - Item: Noblesse_Knight_Armor
      - Item: Noblesse_Spear_Armor
      - Item: Noblesse_Genesis_Armor
      - Item: Noblesse_Sharp_Suit
      - Item: Noblesse_Aim_Suit
      - Item: Noblesse_Severe_Suit
      - Item: Noblesse_Reverb_Suit
      - Item: Noblesse_Adora_Robe
      - Item: Noblesse_Duple_Robe
      - Item: Noblesse_Tonado_Armor
      - Item: Noblesse_Vulcan_Armor
      - Item: Noblesse_Kart_Suit
      - Item: Noblesse_Kart_Suit2
      - Item: Noblesse_Rolling_Suit
      - Item: Noblesse_Assasin_Suit
      - Item: Noblesse_Fatal_Suit
      - Item: Noblesse_Stalker_Suit
      - Item: Noblesse_Picky_Robe
      - Item: Noblesse_Carrot_Robe
      - Item: Noblesse_Trip_Suit
      - Item: Noblesse_Firerain_Suit
      - Item: Noblesse_Crimson_Robe
      - Item: Noblesse_Frost_Robe
      - Item: Noblesse_Psychic_Robe
      - Item: Noblesse_Dust_Robe
      - Item: Noblesse_Sun_Suit
      - Item: Noblesse_Moon_Suit
      - Item: Noblesse_Ninja_Suit
      - Item: Noblesse_Kunai_Suit
      - Item: Noblesse_Swhoo_Robe
      - Item: Noblesse_Explosion_Robe
      - Item: Noblesse_Knuckle_Suit
      - Item: Noblesse_Tiger_Suit
      - Item: Noblesse_Snovice_Suit
      - Item: Noblesse_Snovice_Robe
      - Item: Noblesse_Attack_Boots
      - Item: Noblesse_Magic_Boots
      - Item: Noblesse_Attack_Manteau
      - Item: Noblesse_Magic_Manteau
    Result: |
      callfunc("F_Lapine_Noblesse_Refine_Ticket", .@refine);
      getitem2(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
  - Item: Imperial_Rifine_Ticket
    NotSocketEnchantItem: false
    TargetItem:
      - Item: Imperial_Breath_Armor
      - Item: Imperial_Knight_Armor
      - Item: Imperial_Spear_Armor
      - Item: Imperial_Genesis_Armor
      - Item: Imperial_Sharp_Suit
      - Item: Imperial_Aim_Suit
      - Item: Imperial_Severe_Suit
      - Item: Imperial_Reverb_Suit
      - Item: Imperial_Adora_Robe
      - Item: Imperial_Duple_Robe
      - Item: Imperial_Tonado_Armor
      - Item: Imperial_Vulcan_Armor
      - Item: Imperial_Kart_Suit
      - Item: Imperial_Kart_Suit2
      - Item: Imperial_Rolling_Suit
      - Item: Imperial_Assasin_Suit
      - Item: Imperial_Fatal_Suit
      - Item: Imperial_Stalker_Suit
      - Item: Imperial_Picky_Robe
      - Item: Imperial_Carrot_Robe
      - Item: Imperial_Trip_Suit
      - Item: Imperial_Firerain_Suit
      - Item: Imperial_Crimson_Robe
      - Item: Imperial_Frost_Robe
      - Item: Imperial_Psychic_Robe
      - Item: Imperial_Dust_Robe
      - Item: Imperial_Sun_Suit
      - Item: Imperial_Moon_Suit
      - Item: Imperial_Ninja_Suit
      - Item: Imperial_Kunai_Suit
      - Item: Imperial_Swhoo_Robe
      - Item: Imperial_Explosion_Robe
      - Item: Imperial_Knuckle_Suit
      - Item: Imperial_Tiger_Suit
      - Item: Imperial_Snovice_Suit
      - Item: Imperial_Snovice_Robe
      - Item: Imperial_Attack_Boots
      - Item: Imperial_Magic_Boots
      - Item: Imperial_Attack_Manteau
      - Item: Imperial_Magic_Manteau
    Result: |
      callfunc("F_Lapine_Imperial_Refine_Ticket", .@refine);
      getitem2(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
  - Item: Grace_Rifine_Ticket
    NotSocketEnchantItem: false
    TargetItem:
      - Item: Grace_Breath_Armor
      - Item: Grace_Knight_Armor
      - Item: Grace_Spear_Armor
      - Item: Grace_Genesis_Armor
      - Item: Grace_Sharp_Suit
      - Item: Grace_Aim_Suit
      - Item: Grace_Severe_Suit
      - Item: Grace_Reverb_Suit
      - Item: Grace_Adora_Robe
      - Item: Grace_Duple_Robe
      - Item: Grace_Tonado_Armor
      - Item: Grace_Vulcan_Armor
      - Item: Grace_Kart_Suit
      - Item: Grace_Kart_Suit2
      - Item: Grace_Rolling_Suit
      - Item: Grace_Assasin_Suit
      - Item: Grace_Fatal_Suit
      - Item: Grace_Stalker_Suit
      - Item: Grace_Picky_Robe
      - Item: Grace_Carrot_Robe
      - Item: Grace_Trip_Suit
      - Item: Grace_Firerain_Suit
      - Item: Grace_Crimson_Robe
      - Item: Grace_Frost_Robe
      - Item: Grace_Psychic_Robe
      - Item: Grace_Dust_Robe
      - Item: Grace_Sun_Suit
      - Item: Grace_Moon_Suit
      - Item: Grace_Ninja_Suit
      - Item: Grace_Kunai_Suit
      - Item: Grace_Swhoo_Robe
      - Item: Grace_Explosion_Robe
      - Item: Grace_Knuckle_Suit
      - Item: Grace_Tiger_Suit
      - Item: Grace_Snovice_Suit
      - Item: Grace_Snovice_Robe
      - Item: Grace_Attack_Boots
      - Item: Grace_Magic_Boots
      - Item: Grace_Attack_Manteau
      - Item: Grace_Magic_Manteau
    Result: |
      callfunc("F_Lapine_Grace_Refine_Ticket", .@refine);
      getitem2(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
  - Item: Imperial_Convert1
    TargetItem:
      - Item: Imperial_Attack_Manteau
      - Item: Imperial_Magic_Manteau
    Result: |
      callfunc("F_Lapine_Imperial_Convert1", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Imperial_Convert2
    TargetItem:
      - Item: Imperial_Attack_Manteau
      - Item: Imperial_Magic_Manteau
    Result: |
      callfunc("F_Lapine_Imperial_Convert2", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Imperial_Convert3
    TargetItem:
      - Item: Imperial_Breath_Armor
      - Item: Imperial_Knight_Armor
      - Item: Imperial_Spear_Armor
      - Item: Imperial_Genesis_Armor
      - Item: Imperial_Sharp_Suit
      - Item: Imperial_Aim_Suit
      - Item: Imperial_Severe_Suit
      - Item: Imperial_Reverb_Suit
      - Item: Imperial_Adora_Robe
      - Item: Imperial_Duple_Robe
      - Item: Imperial_Tonado_Armor
      - Item: Imperial_Vulcan_Armor
      - Item: Imperial_Kart_Suit
      - Item: Imperial_Kart_Suit2
      - Item: Imperial_Rolling_Suit
      - Item: Imperial_Assasin_Suit
      - Item: Imperial_Fatal_Suit
      - Item: Imperial_Stalker_Suit
      - Item: Imperial_Picky_Robe
      - Item: Imperial_Carrot_Robe
      - Item: Imperial_Trip_Suit
      - Item: Imperial_Firerain_Suit
      - Item: Imperial_Crimson_Robe
      - Item: Imperial_Frost_Robe
      - Item: Imperial_Psychic_Robe
      - Item: Imperial_Dust_Robe
      - Item: Imperial_Sun_Suit
      - Item: Imperial_Moon_Suit
      - Item: Imperial_Ninja_Suit
      - Item: Imperial_Kunai_Suit
      - Item: Imperial_Swhoo_Robe
      - Item: Imperial_Explosion_Robe
      - Item: Imperial_Knuckle_Suit
      - Item: Imperial_Tiger_Suit
      - Item: Imperial_Snovice_Suit
      - Item: Imperial_Snovice_Robe
    Result: |
      callfunc("F_Lapine_Imperial_Convert3", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Imperial_Convert4
    TargetItem:
      - Item: Imperial_Breath_Armor
      - Item: Imperial_Knight_Armor
      - Item: Imperial_Spear_Armor
      - Item: Imperial_Genesis_Armor
      - Item: Imperial_Sharp_Suit
      - Item: Imperial_Aim_Suit
      - Item: Imperial_Severe_Suit
      - Item: Imperial_Reverb_Suit
      - Item: Imperial_Adora_Robe
      - Item: Imperial_Duple_Robe
      - Item: Imperial_Tonado_Armor
      - Item: Imperial_Vulcan_Armor
      - Item: Imperial_Kart_Suit
      - Item: Imperial_Kart_Suit2
      - Item: Imperial_Rolling_Suit
      - Item: Imperial_Assasin_Suit
      - Item: Imperial_Fatal_Suit
      - Item: Imperial_Stalker_Suit
      - Item: Imperial_Picky_Robe
      - Item: Imperial_Carrot_Robe
      - Item: Imperial_Trip_Suit
      - Item: Imperial_Firerain_Suit
      - Item: Imperial_Crimson_Robe
      - Item: Imperial_Frost_Robe
      - Item: Imperial_Psychic_Robe
      - Item: Imperial_Dust_Robe
      - Item: Imperial_Sun_Suit
      - Item: Imperial_Moon_Suit
      - Item: Imperial_Ninja_Suit
      - Item: Imperial_Kunai_Suit
      - Item: Imperial_Swhoo_Robe
      - Item: Imperial_Explosion_Robe
      - Item: Imperial_Knuckle_Suit
      - Item: Imperial_Tiger_Suit
      - Item: Imperial_Snovice_Suit
      - Item: Imperial_Snovice_Robe
    Result: |
      callfunc("F_Lapine_Imperial_Convert4", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Grace_P_Mo_Garment
    TargetItem:
      - Item: Grace_Attack_Manteau
      - Item: Grace_Magic_Manteau
    Result: |
      callfunc("F_Lapine_Grace_Convert1", .@opts[0], .@vals[0],.@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Grace_M_Mo_Garment
    TargetItem:
      - Item: Grace_Attack_Manteau
      - Item: Grace_Magic_Manteau
    Result: |
      callfunc("F_Lapine_Grace_Convert2", .@opts[0], .@vals[0],.@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Grace_P_Mo_Armor
    TargetItem:
      - Item: Grace_Breath_Armor
      - Item: Grace_Knight_Armor
      - Item: Grace_Spear_Armor
      - Item: Grace_Genesis_Armor
      - Item: Grace_Sharp_Suit
      - Item: Grace_Aim_Suit
      - Item: Grace_Severe_Suit
      - Item: Grace_Reverb_Suit
      - Item: Grace_Adora_Robe
      - Item: Grace_Duple_Robe
      - Item: Grace_Tonado_Armor
      - Item: Grace_Vulcan_Armor
      - Item: Grace_Kart_Suit
      - Item: Grace_Kart_Suit2
      - Item: Grace_Rolling_Suit
      - Item: Grace_Assasin_Suit
      - Item: Grace_Fatal_Suit
      - Item: Grace_Stalker_Suit
      - Item: Grace_Picky_Robe
      - Item: Grace_Carrot_Robe
      - Item: Grace_Trip_Suit
      - Item: Grace_Firerain_Suit
      - Item: Grace_Crimson_Robe
      - Item: Grace_Frost_Robe
      - Item: Grace_Psychic_Robe
      - Item: Grace_Dust_Robe
      - Item: Grace_Sun_Suit
      - Item: Grace_Moon_Suit
      - Item: Grace_Ninja_Suit
      - Item: Grace_Kunai_Suit
      - Item: Grace_Swhoo_Robe
      - Item: Grace_Explosion_Robe
      - Item: Grace_Knuckle_Suit
      - Item: Grace_Tiger_Suit
      - Item: Grace_Snovice_Suit
      - Item: Grace_Snovice_Robe
    Result: |
      callfunc("F_Lapine_Grace_Convert3", .@opts[0], .@vals[0],.@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Grace_M_Mo_Armor
    TargetItem:
      - Item: Grace_Breath_Armor
      - Item: Grace_Knight_Armor
      - Item: Grace_Spear_Armor
      - Item: Grace_Genesis_Armor
      - Item: Grace_Sharp_Suit
      - Item: Grace_Aim_Suit
      - Item: Grace_Severe_Suit
      - Item: Grace_Reverb_Suit
      - Item: Grace_Adora_Robe
      - Item: Grace_Duple_Robe
      - Item: Grace_Tonado_Armor
      - Item: Grace_Vulcan_Armor
      - Item: Grace_Kart_Suit
      - Item: Grace_Kart_Suit2
      - Item: Grace_Rolling_Suit
      - Item: Grace_Assasin_Suit
      - Item: Grace_Fatal_Suit
      - Item: Grace_Stalker_Suit
      - Item: Grace_Picky_Robe
      - Item: Grace_Carrot_Robe
      - Item: Grace_Trip_Suit
      - Item: Grace_Firerain_Suit
      - Item: Grace_Crimson_Robe
      - Item: Grace_Frost_Robe
      - Item: Grace_Psychic_Robe
      - Item: Grace_Dust_Robe
      - Item: Grace_Sun_Suit
      - Item: Grace_Moon_Suit
      - Item: Grace_Ninja_Suit
      - Item: Grace_Kunai_Suit
      - Item: Grace_Swhoo_Robe
      - Item: Grace_Explosion_Robe
      - Item: Grace_Knuckle_Suit
      - Item: Grace_Tiger_Suit
      - Item: Grace_Snovice_Suit
      - Item: Grace_Snovice_Robe
    Result: |
      callfunc("F_Lapine_Grace_Convert4", .@opts[0], .@vals[0],.@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Ein_Ddbox
    TargetItem:
      - Item: Ein_BHSWORD
      - Item: Ein_BHSTAFF
      - Item: Ein_BHHuuma
      - Item: Ein_BHKATAR
      - Item: Ein_BHAXE
      - Item: Ein_BHBOW
      - Item: Ein_1HKNUCK
      - Item: Ein_1HHAMMER
      - Item: Ein_1HWAND
      - Item: Ein_1HWHIP
      - Item: Ein_1HBOOK
      - Item: Ein_1HDAGGER
      - Item: Ein_1HMAGGER
      - Item: Ein_1HSPEAR
      - Item: Ein_1HLUTE
      - Item: Ein_1HSWORD
      - Item: Ein_1HGUN
      - Item: Ein_1H_Foxtail
   # TODO
    Result: |
      callfunc("F_Lapine_Ein_Ddbox", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Ein_Ddbox2
    TargetItem:
      - Item: Ein_BHSWORD
      - Item: Ein_BHSTAFF
      - Item: Ein_BHHuuma
      - Item: Ein_BHKATAR
      - Item: Ein_BHAXE
      - Item: Ein_BHBOW
      - Item: Ein_1HKNUCK
      - Item: Ein_1HHAMMER
      - Item: Ein_1HWAND
      - Item: Ein_1HWHIP
      - Item: Ein_1HBOOK
      - Item: Ein_1HDAGGER
      - Item: Ein_1HMAGGER
      - Item: Ein_1HSPEAR
      - Item: Ein_1HLUTE
      - Item: Ein_1HSWORD
      - Item: Ein_1HGUN
      - Item: Ein_1H_Foxtail
   # TODO
    Result: |
      callfunc("F_Lapine_Ein_Ddbox2", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Abyss_Ddbox
    TargetItem:
      - Item: DragonA_Red
      - Item: DragonA_Green
      - Item: DragonA_Gold
      - Item: DragonA_Purple
      - Item: DragonA_Blue
      - Item: DragonA_Silver
   # TODO
    Result: |
      callfunc("F_Lapine_Abyss_Ddbox", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Abyss_Ddbox2
    TargetItem:
      - Item: DragonA_Red
      - Item: DragonA_Green
      - Item: DragonA_Gold
      - Item: DragonA_Purple
      - Item: DragonA_Blue
      - Item: DragonA_Silver
   # TODO
    Result: |
      callfunc("F_Lapine_Abyss_Ddbox2", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Abyss_Ddbox3
    TargetItem:
      - Item: Drag_Manteau
   # TODO
    Result: |
      callfunc("F_Lapine_Abyss_Ddbox3", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Abyss_Ddbox4
    TargetItem:
      - Item: Dragon_Boots
   # TODO
    Result: |
      callfunc("F_Lapine_Abyss_Ddbox4", .@opts[0], .@vals[0]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: M_M_Defense #25670 Modification Module (Defense)
    TargetItem:
      - Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      - Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      - Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      - Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
    Result: |
        .@enchant_id = 29527;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25670,1;
        }
  - Item: M_M_Magic_Defense #25671 # M_M_Magic_Defense,Modification Module (Magic Defense)
    TargetItem:
      - Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      - Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      - Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      - Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
    Result: |
        .@enchant_id = 29528;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25671,1;
        }
  - Item: M_M_Vit   #25672 # M_M_Vit Modification Module (Vit)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4742;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25672,1;
        }
  - Item: M_M_Luk #25673 # M_M_Luk Modification Module (Luk)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4752;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25673,1;
        }
  - Item: M_M_Str #25674 # M_M_Str Modification Module (Str)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4702;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25674,1;
        }
  - Item: M_M_Agi #25675 # M_M_Agi Modification Module (Agi)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4732;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25675,1;
        }
  - Item: M_M_Int #25676 # M_M_Int Modification Module (Int)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4712;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25676,1;
        }
  - Item: M_M_Dex #25677 # M_M_Dex Modification Module (Dex)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4722;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25677,1;
        }
  - Item: M_M_HP_recovery #25678 # M_M_HP_recovery Modification Module (HP recovery)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29529;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25678,1;
        }
  - Item: M_M_SP_recovery #25679 # M_M_SP_recovery Modification Module (SP recovery)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29532;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25679,1;
        }
  - Item: M_M_Spell5 #25680 # M_M_Spell5 Modification Module (Spell)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4826;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25680,1;
        }
  - Item: M_M_Attack_Delay_4 #25681 # M_M_Attack_Delay_4 Modification Module (Attack Speed)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4881;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25681,1;
        }
  - Item: M_M_Fatal4 #25682 # M_M_Fatal4 Modification Module (Fatal)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4866;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25682,1;
        }
  - Item: M_M_Expert_Archer5 #25683 # M_M_Expert_Archer5 Modification Module (Expert Archer)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 4836;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25683,1;
        }
  - Item: M_M_Vital #25684 # M_M_Vital Modification Module (Vital)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29531;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25684,1;
        }
  - Item: M_M_Mental #25685 # M_M_Mental Modification Module (Mental)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29530;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25685,1;
        }
  - Item: M_M_Heal #25686 # M_M_Heal Modification Module (Mental)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29533;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25686,1;
        }
  - Item: M_M_Power #25687 # M_M_Power Modification Module (Power)
    TargetItem:
      - Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      - Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29534;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25687,1;
        }
  - Item: M_M_Magic #25688 # M_M_Magic Modification Module (Magic)
    TargetItem:
      - Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      - Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29535;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25688,1;
        }
  - Item: M_M_Shooter #25689 # M_M_Shooter Modification Module (Shooter)
    TargetItem:
      - Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      - Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29536;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25689,1;
        }
  - Item: M_M_Fast #25690 # M_M_Fast Modification Module (Fast)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      - Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      - Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29537;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25690,1;
        }
  - Item: M_M_Caster #25691 # M_M_Caster Modification Module (Caster)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      - Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      - Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29538;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25691,1;
        }
  - Item: M_M_Critical #25692 # M_M_Critical Modification Module (Critical)	
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      - Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      - Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29539;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25692,1;
        }
  - Item: M_M_Delay_After_skill #25693 # M_M_Delay_After_skill Modification Module (Delay After Skill)
    TargetItem:
      - Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      - Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29540;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25693,1;
        }
  - Item: M_M_Fixed_Casting #25694 # M_M_Fixed_Casting Modification Module (Fixed Casting)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29541;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25694,1;
        }
  - Item: M_M_Above_All #25695 # M_M_Above_All Modification Module (Above All)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      - Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      - Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29542;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25695,1;
        }
  - Item: M_M_Drain_Life #25696 # M_M_Drain_Life Modification Module (Drain Life)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29543;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29543,29544,29545,29546;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25696,1;
        }
  - Item: M_M_Drain_Soul #25697 # M_M_Drain_Soul Modification Module (Drain Soul)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29544;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29543,29544,29545,29546;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25697,1;
        }
  - Item: M_M_Magic_Healing #25698 # M_M_Magic_Healing Modification Module (Magic Healing)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29545;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29543,29544,29545,29546;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25698,1;
        }
  - Item: M_M_Magic_Soul #25699 # M_M_Magic_Soul Modification Module (Magic Soul)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      #- Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      #- Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29546;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29543,29544,29545,29546;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25699,1;
        }
  - Item: M_M_Unlimited_Vital #25700 # M_M_Unlimited_Vital Modification Module (Unlimited Vital)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29547;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29547,29548,29549,29550,29551,29552;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25700,1;
        }
  - Item: M_M_Spell_Buster # 25701 # M_M_Spell_Buster Modification Module (Spell Buster)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29548;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29547,29548,29549,29550,29551,29552;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25701,1;
        }
  - Item: M_M_Firing_Shot #25702 # M_M_Firing_Shot Modification Module (Firing Shot)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29549;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29547,29548,29549,29550,29551,29552;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25702,1;
        }
  - Item: M_M_Overpower #25703 # M_M_Overpower Modification Module (Overpower)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29550;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29547,29548,29549,29550,29551,29552;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25703,1;
        }
  - Item: M_M_Fatal_Flash #25704 # M_M_Fatal_Flash Modification Module (Fatal Flash)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29551;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29547,29548,29549,29550,29551,29552;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25704,1;
        }
  - Item: M_M_Lucky_Strike #25705 # M_M_Lucky_Strike Modification Module (Lucky Strike)
    TargetItem:
      #- Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      #- Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      #- Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      #- Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      #- Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      #- Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      #- Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      #- Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L
    Result: |
        .@enchant_id = 29552;
        .@max_enchant = 1;
        .@count_enchant = 0;
        setarray .@unique[0],29547,29548,29549,29550,29551,29552;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (inarray(.@unique[0],@last_lapine_card1) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card2) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card3) >= 0) {
            .@count_enchant++;
        } else if (inarray(.@unique[0],@last_lapine_card4) >= 0) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem 25705,1;
        }     
        
  - Item: Joy_Of_Victory # 100009 # Joy_Of_Victory, Joy_Of_Victory (Middle)
    TargetItem:
      - Item: Victory_Wing_Ear_ #400002 #Victory_Wing_Ear_
    Result: |
        callfunc("F_Lapine_Joy_Of_Victory", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
        .@params[0] = 0;
        getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
        
  - Item: Class_Sha_R_M_Melee #100205 # Shadow_Class_Physic, 
    NeedRefineMin: 0
    NotSocketEnchantItem: false
    TargetItem:
      - Item: S_Swordman_earring
      - Item: S_Merchant_earring
      - Item: S_Acolyte_earring
      - Item: S_Magician_earring
      - Item: S_Swordman_Pendant
      - Item: S_Merchant_Pendant
      - Item: S_Acolyte_Pendant
      - Item: S_Thief_Pendant
      - Item: S_Magician_Pendant
      - Item: S_Archer_Pendant
      - Item: S_Knight_Shoes
      - Item: S_Crusader_Shoes
      - Item: S_Blacksmith_Shoes
      - Item: S_Alchemist_Shoes
      - Item: S_Priest_Shoes
      - Item: S_Monk_Shoes
      - Item: S_Assassin_Shoes
      - Item: S_Rogue_Shoes
      - Item: S_Wizard_Shoes
      - Item: S_Sage_Shoes
      - Item: S_Hunter_Shoes
      - Item: S_Bard_Shoes
      - Item: S_Dancer_Shoes
      - Item: S_Knight_Armor
      - Item: S_Crusader_Armor
      - Item: S_Blacksmith_Armor
      - Item: S_Alchemist_Armor
      - Item: S_Priest_Armor
      - Item: S_Monk_Armor
      - Item: S_Assassin_Armor
      - Item: S_Rogue_Armor
      - Item: S_Wizard_Armor
      - Item: S_Sage_Armor
      - Item: S_Hunter_Armor
      - Item: S_Bard_Armor
      - Item: S_Dancer_Armor
      - Item: S_SuperNovice_Weapon
      - Item: S_Gunslinger_Weapon
      - Item: S_Taekwon_Weapon
      - Item: S_Ninja_Weapon
      - Item: S_DoramMagical_Weapon
      - Item: S_DoramPhysical_Weapon
      - Item: S_Runeknight_Weapon
      - Item: S_Royalguard_Weapon
      - Item: S_Mechanic_weapon
      - Item: S_Genetic_Weapon
      - Item: S_Archbishop_Weapon
      - Item: S_Sura_weapon
      - Item: S_Guillotine_Weapon
      - Item: S_Shadowchaser_Weapon
      - Item: S_Warlock_Weapon
      - Item: S_Sorcerer_Weapon
      - Item: S_Ranger_Weapon
      - Item: S_Minstrel_Weapon
      - Item: S_Wanderer_Weapon
      - Item: S_Runeknight_Shield
      - Item: S_Royalguard_Shield
      - Item: S_Mechanic_Shield
      - Item: S_Genetic_Shield
      - Item: S_Archbishop_Shield
      - Item: S_Sura_Shield
      - Item: S_Guillotine_Shield
      - Item: S_Shadowchaser_Shield
      - Item: S_Warlock_Shield
      - Item: S_Sorcerer_Shield
      - Item: S_Ranger_Shield
      - Item: S_Minstrel_Shield
      - Item: S_Wanderer_Shield
      - Item: S_Ninja_Shield
      - Item: S_Taekwon_Shield
      - Item: S_DoramPhysical_Shield
      - Item: S_DoramMagical_Shield
      - Item: S_SuperNovice_Shield
      - Item: S_Gunslinger_Shield
      - Item: S_Thief_earring
      - Item: S_Archer_earring
      - Item: S_Rebellion_Armor
      - Item: S_Kagerou_Armor
      - Item: S_Oboro_Armor
      - Item: S_Rebellion_Shoes
      - Item: S_Kagerou_Shoes
      - Item: S_Oboro_Shoes
      - Item: S_DoramPhysical_Armor
      - Item: S_DoramPhysical_Shoes
      - Item: S_DoramMagical_Armor
      - Item: S_DoramMagical_Shoes
      - Item: S_Star_Emperor_Armor
      - Item: S_Star_Emperor_Shoes
      - Item: S_Soul_Reaper_Armor
      - Item: S_Soul_Reaper_Shoes
    Result: |
        callfunc("F_Lapine_Shadow_Class_Physic_Mix", .@opts[0], .@vals[0]);
        .@params[0] = 0;
        getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Class_Sha_R_M_Magic #100206 # Shadow_Class_Magic, 
    NeedRefineMin: 0
    NotSocketEnchantItem: false
    TargetItem:
      - Item: S_Swordman_earring
      - Item: S_Merchant_earring
      - Item: S_Acolyte_earring
      - Item: S_Magician_earring
      - Item: S_Swordman_Pendant
      - Item: S_Merchant_Pendant
      - Item: S_Acolyte_Pendant
      - Item: S_Thief_Pendant
      - Item: S_Magician_Pendant
      - Item: S_Archer_Pendant
      - Item: S_Knight_Shoes
      - Item: S_Crusader_Shoes
      - Item: S_Blacksmith_Shoes
      - Item: S_Alchemist_Shoes
      - Item: S_Priest_Shoes
      - Item: S_Monk_Shoes
      - Item: S_Assassin_Shoes
      - Item: S_Rogue_Shoes
      - Item: S_Wizard_Shoes
      - Item: S_Sage_Shoes
      - Item: S_Hunter_Shoes
      - Item: S_Bard_Shoes
      - Item: S_Dancer_Shoes
      - Item: S_Knight_Armor
      - Item: S_Crusader_Armor
      - Item: S_Blacksmith_Armor
      - Item: S_Alchemist_Armor
      - Item: S_Priest_Armor
      - Item: S_Monk_Armor
      - Item: S_Assassin_Armor
      - Item: S_Rogue_Armor
      - Item: S_Wizard_Armor
      - Item: S_Sage_Armor
      - Item: S_Hunter_Armor
      - Item: S_Bard_Armor
      - Item: S_Dancer_Armor
      - Item: S_SuperNovice_Weapon
      - Item: S_Gunslinger_Weapon
      - Item: S_Taekwon_Weapon
      - Item: S_Ninja_Weapon
      - Item: S_DoramMagical_Weapon
      - Item: S_DoramPhysical_Weapon
      - Item: S_Runeknight_Weapon
      - Item: S_Royalguard_Weapon
      - Item: S_Mechanic_weapon
      - Item: S_Genetic_Weapon
      - Item: S_Archbishop_Weapon
      - Item: S_Sura_weapon
      - Item: S_Guillotine_Weapon
      - Item: S_Shadowchaser_Weapon
      - Item: S_Warlock_Weapon
      - Item: S_Sorcerer_Weapon
      - Item: S_Ranger_Weapon
      - Item: S_Minstrel_Weapon
      - Item: S_Wanderer_Weapon
      - Item: S_Runeknight_Shield
      - Item: S_Royalguard_Shield
      - Item: S_Mechanic_Shield
      - Item: S_Genetic_Shield
      - Item: S_Archbishop_Shield
      - Item: S_Sura_Shield
      - Item: S_Guillotine_Shield
      - Item: S_Shadowchaser_Shield
      - Item: S_Warlock_Shield
      - Item: S_Sorcerer_Shield
      - Item: S_Ranger_Shield
      - Item: S_Minstrel_Shield
      - Item: S_Wanderer_Shield
      - Item: S_Ninja_Shield
      - Item: S_Taekwon_Shield
      - Item: S_DoramPhysical_Shield
      - Item: S_DoramMagical_Shield
      - Item: S_SuperNovice_Shield
      - Item: S_Gunslinger_Shield
      - Item: S_Thief_earring
      - Item: S_Archer_earring
      - Item: S_Rebellion_Armor
      - Item: S_Kagerou_Armor
      - Item: S_Oboro_Armor
      - Item: S_Rebellion_Shoes
      - Item: S_Kagerou_Shoes
      - Item: S_Oboro_Shoes
      - Item: S_DoramPhysical_Armor
      - Item: S_DoramPhysical_Shoes
      - Item: S_DoramMagical_Armor
      - Item: S_DoramMagical_Shoes
      - Item: S_Star_Emperor_Armor
      - Item: S_Star_Emperor_Shoes
      - Item: S_Soul_Reaper_Armor
      - Item: S_Soul_Reaper_Shoes
    Result: |
        callfunc("F_Lapine_Shadow_Class_Magic_Mix", .@opts[0], .@vals[0]);
        .@params[0] = 0;
        getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);

  - Item: Auto_Imp_Melee_1
    TargetItem:      
      - Item: Ep172_1h_Sword
      - Item: Ep172_1h_Sword2
      - Item: Ep172_1h_Wand
      - Item: Ep172_1h_Book
      - Item: Ep172_1h_Axe
      - Item: Ep172_1h_Sword2
      - Item: Ep172_Bh_Bow
      - Item: Ep172_Bh_Bow2
      - Item: Ep172_Bh_knuck
      - Item: Ep172_1h_Spear
      - Item: Ep172_Bh_Spear
      - Item: Ep172_1h_Dagger
      - Item: Ep172_Bh_Katar
      - Item: Ep172_Bh_Staff
      - Item: Ep172_1h_Book2
      - Item: Ep172_1h_Dagger2
      - Item: Ep172_1h_Whip
      - Item: Ep172_1h_Inst
      - Item: Ep172_Bh_Bow3
      - Item: Ep172_Bh_Huuma
      - Item: Ep172_1h_Hammer
      - Item: Ep172_1h_Foxtail
      - Item: Ep172_1h_Rifle
      - Item: Ep172_1h_Shotgun
      - Item: Ep172_1h_Gatling
      - Item: Ep172_1h_Grenade
    Result: |
      callfunc("F_Lapine_Auto_Imp_Melee_1", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Auto_Imp_Melee_2
    TargetItem:      
      - Item: Ep172_1h_Sword
      - Item: Ep172_1h_Sword2
      - Item: Ep172_1h_Wand
      - Item: Ep172_1h_Book
      - Item: Ep172_1h_Axe
      - Item: Ep172_1h_Sword2
      - Item: Ep172_Bh_Bow
      - Item: Ep172_Bh_Bow2
      - Item: Ep172_Bh_knuck
      - Item: Ep172_1h_Spear
      - Item: Ep172_Bh_Spear
      - Item: Ep172_1h_Dagger
      - Item: Ep172_Bh_Katar
      - Item: Ep172_Bh_Staff
      - Item: Ep172_1h_Book2
      - Item: Ep172_1h_Dagger2
      - Item: Ep172_1h_Whip
      - Item: Ep172_1h_Inst
      - Item: Ep172_Bh_Bow3
      - Item: Ep172_Bh_Huuma
      - Item: Ep172_1h_Hammer
      - Item: Ep172_1h_Foxtail
      - Item: Ep172_1h_Rifle
      - Item: Ep172_1h_Shotgun
      - Item: Ep172_1h_Gatling
      - Item: Ep172_1h_Grenade
    Result: |
      callfunc("F_Lapine_Auto_Imp_Melee_2", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Auto_Imp_Melee_3
    TargetItem:      
      - Item: Ep172_1h_Sword
      - Item: Ep172_1h_Sword2
      - Item: Ep172_1h_Wand
      - Item: Ep172_1h_Book
      - Item: Ep172_1h_Axe
      - Item: Ep172_1h_Sword2
      - Item: Ep172_Bh_Bow
      - Item: Ep172_Bh_Bow2
      - Item: Ep172_Bh_knuck
      - Item: Ep172_1h_Spear
      - Item: Ep172_Bh_Spear
      - Item: Ep172_1h_Dagger
      - Item: Ep172_Bh_Katar
      - Item: Ep172_Bh_Staff
      - Item: Ep172_1h_Book2
      - Item: Ep172_1h_Dagger2
      - Item: Ep172_1h_Whip
      - Item: Ep172_1h_Inst
      - Item: Ep172_Bh_Bow3
      - Item: Ep172_Bh_Huuma
      - Item: Ep172_1h_Hammer
      - Item: Ep172_1h_Foxtail
      - Item: Ep172_1h_Rifle
      - Item: Ep172_1h_Shotgun
      - Item: Ep172_1h_Gatling
      - Item: Ep172_1h_Grenade
    Result: |
      callfunc("F_Lapine_Auto_Imp_Melee_3", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Auto_Imp_Magic_1
    TargetItem:      
      - Item: Ep172_1h_Sword
      - Item: Ep172_1h_Sword2
      - Item: Ep172_1h_Wand
      - Item: Ep172_1h_Book
      - Item: Ep172_1h_Axe
      - Item: Ep172_1h_Sword2
      - Item: Ep172_Bh_Bow
      - Item: Ep172_Bh_Bow2
      - Item: Ep172_Bh_knuck
      - Item: Ep172_1h_Spear
      - Item: Ep172_Bh_Spear
      - Item: Ep172_1h_Dagger
      - Item: Ep172_Bh_Katar
      - Item: Ep172_Bh_Staff
      - Item: Ep172_1h_Book2
      - Item: Ep172_1h_Dagger2
      - Item: Ep172_1h_Whip
      - Item: Ep172_1h_Inst
      - Item: Ep172_Bh_Bow3
      - Item: Ep172_Bh_Huuma
      - Item: Ep172_1h_Hammer
      - Item: Ep172_1h_Foxtail
      - Item: Ep172_1h_Rifle
      - Item: Ep172_1h_Shotgun
      - Item: Ep172_1h_Gatling
      - Item: Ep172_1h_Grenade
    Result: |
      callfunc("F_Lapine_Auto_Imp_Magic_1", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Auto_Imp_Magic_2
    TargetItem:      
      - Item: Ep172_1h_Sword
      - Item: Ep172_1h_Sword2
      - Item: Ep172_1h_Wand
      - Item: Ep172_1h_Book
      - Item: Ep172_1h_Axe
      - Item: Ep172_1h_Sword2
      - Item: Ep172_Bh_Bow
      - Item: Ep172_Bh_Bow2
      - Item: Ep172_Bh_knuck
      - Item: Ep172_1h_Spear
      - Item: Ep172_Bh_Spear
      - Item: Ep172_1h_Dagger
      - Item: Ep172_Bh_Katar
      - Item: Ep172_Bh_Staff
      - Item: Ep172_1h_Book2
      - Item: Ep172_1h_Dagger2
      - Item: Ep172_1h_Whip
      - Item: Ep172_1h_Inst
      - Item: Ep172_Bh_Bow3
      - Item: Ep172_Bh_Huuma
      - Item: Ep172_1h_Hammer
      - Item: Ep172_1h_Foxtail
      - Item: Ep172_1h_Rifle
      - Item: Ep172_1h_Shotgun
      - Item: Ep172_1h_Gatling
      - Item: Ep172_1h_Grenade
    Result: |
      callfunc("F_Lapine_Auto_Imp_Magic_2", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Auto_Imp_Magic_3
    TargetItem:      
      - Item: Ep172_1h_Sword
      - Item: Ep172_1h_Sword2
      - Item: Ep172_1h_Wand
      - Item: Ep172_1h_Book
      - Item: Ep172_1h_Axe
      - Item: Ep172_1h_Sword2
      - Item: Ep172_Bh_Bow
      - Item: Ep172_Bh_Bow2
      - Item: Ep172_Bh_knuck
      - Item: Ep172_1h_Spear
      - Item: Ep172_Bh_Spear
      - Item: Ep172_1h_Dagger
      - Item: Ep172_Bh_Katar
      - Item: Ep172_Bh_Staff
      - Item: Ep172_1h_Book2
      - Item: Ep172_1h_Dagger2
      - Item: Ep172_1h_Whip
      - Item: Ep172_1h_Inst
      - Item: Ep172_Bh_Bow3
      - Item: Ep172_Bh_Huuma
      - Item: Ep172_1h_Hammer
      - Item: Ep172_1h_Foxtail
      - Item: Ep172_1h_Rifle
      - Item: Ep172_1h_Shotgun
      - Item: Ep172_1h_Gatling
      - Item: Ep172_1h_Grenade
    Result: |
      callfunc("F_Lapine_Auto_Imp_Magic_3", .@opts[0], .@vals[0], .@opts[1], .@vals[1], .@opts[2], .@vals[2]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: Illu_Enhance_Cube
    NeedRefineMin: 4
    TargetItem:      
      - Item: Illusion_Armor_A
      - Item: Illusion_Armor_B
      - Item: Illusion_Engine_A
      - Item: Illusion_Engine_B
      - Item: Illusion_Leg_A
      - Item: Illusion_Leg_B
    Result: |
      callfunc("F_Lapine_Illu_Enhance_Cube", .@refine);
      getitem3(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,@last_lapine_option_id,@last_lapine_option_value,@last_lapine_option_param);   
  - Item: Auto_Enhance_Cube
    NeedRefineMin: 4
    TargetItem:      
      - Item: Auto_Armor_A #Automatic_Armor_A-type
      - Item: Auto_Armor_B #Automatic_Armor_B-type
      - Item: Auto_Engine_A #Automatic_Engine_wing_A-type
      - Item: Auto_Engine_B #Automatic_Engine_wing_B-type
      - Item: Auto_Leg_B #Automatic_Leg_A-type
      - Item: Auto_Leg_A #Automatic_Leg_B-type
    Result: |
      callfunc("F_Lapine_Auto_Enhance_Cube", .@refine);
      getitem3(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,@last_lapine_option_id,@last_lapine_option_value,@last_lapine_option_param);
## Start 17.2 Modudle Epic first     
  - Item: EP17_2_EP1 # 1000152
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000152;
        .@enchant_id = 310127;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        } 
  - Item: EP17_2_EP2 # 1000153
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000153;
        .@enchant_id = 310128;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_EP3 # 1000154
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000154;
        .@enchant_id = 310129;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }
  - Item: EP17_2_EP4 # 1000155
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000155;
        .@enchant_id = 310130;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        } 
  - Item: EP17_2_EP5 # 1000156
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000156;
        .@enchant_id = 310131;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }          
  - Item: EP17_2_EP6 # 1000157
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000157;
        .@enchant_id = 310132;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }          
  - Item: EP17_2_EP7 # 1000158
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000158;
        .@enchant_id = 310133;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }                  
  - Item: EP17_2_EP8 # 1000159
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000159;
        .@enchant_id = 310134;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }                          
  - Item: EP17_2_EP9 # 1000160
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000160;
        .@enchant_id = 310135;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP10 # 1000161
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000161;
        .@enchant_id = 310136;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }                                   
  - Item: EP17_2_EP11 # 1000162
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000162;
        .@enchant_id = 310137;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }                               
  - Item: EP17_2_EP12 # 1000163
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000163;
        .@enchant_id = 310138;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }                             
  - Item: EP17_2_EP13 # 1000164
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000164;
        .@enchant_id = 310139;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_EP14 # 1000165
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000165;
        .@enchant_id = 310140;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }         
  - Item: EP17_2_EP15 # 1000166
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000166;
        .@enchant_id = 310141;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }         
  - Item: EP17_2_EP16 # 1000167
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000167;
        .@enchant_id = 310142;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP17 # 1000168
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000168;
        .@enchant_id = 310143;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP18 # 1000169
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000169;
        .@enchant_id = 310144;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP19 # 1000170
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000170;
        .@enchant_id = 310145;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP20 # 1000171
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000171;
        .@enchant_id = 310146;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP21 # 1000172
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000172;
        .@enchant_id = 310147;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP22 # 1000173
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000173;
        .@enchant_id = 310148;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP23 # 1000174
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000174;
        .@enchant_id = 310149;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP24 # 1000175
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000175;
        .@enchant_id = 310150;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_EP25 # 1000176
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000176;
        .@enchant_id = 310151;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }            
  - Item: EP17_2_EP26 # 1000177
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000177;
        .@enchant_id = 310152;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_EP27 # 1000178
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000178;
        .@enchant_id = 310153;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }   
  - Item: EP17_2_EP28 # 1000179
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000179;
        .@enchant_id = 310154;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP29 # 1000180
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000180;
        .@enchant_id = 310155;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP30 # 1000181
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000181;
        .@enchant_id = 310156;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_EP31 # 1000182
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000182;
        .@enchant_id = 310157;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_EP32 # 1000183
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000183;
        .@enchant_id = 310158;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }         
  - Item: EP17_2_EP33 # 1000184
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000184;
        .@enchant_id = 310159;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP34 # 1000185
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000185;
        .@enchant_id = 310160;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }          
  - Item: EP17_2_EP35 # 1000186
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000186;
        .@enchant_id = 310161;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }             
  - Item: EP17_2_EP36 # 1000187
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000187;
        .@enchant_id = 310162;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }                
  - Item: EP17_2_EP37 # 1000188
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000188;
        .@enchant_id = 310163;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }          
  - Item: EP17_2_EP38 # 1000189
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000189;
        .@enchant_id = 310164;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_EP39 # 1000190
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000190;
        .@enchant_id = 310165;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }     
  - Item: EP17_2_EP40 # 1000191
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000191;
        .@enchant_id = 310166;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }         
  - Item: EP17_2_EP41 # 1000192
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000192;
        .@enchant_id = 310167;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_EP42 # 1000193
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000193;
        .@enchant_id = 310168;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP43 # 1000194
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000194;
        .@enchant_id = 310169;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_EP44 # 1000195
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000195;
        .@enchant_id = 310170;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_EP45 # 1000196
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000196;
        .@enchant_id = 310171;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_EP46 # 1000197
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000197;
        .@enchant_id = 310172;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP47 # 1000198
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000198;
        .@enchant_id = 310173;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP48 # 1000199
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000199;
        .@enchant_id = 310174;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP49 # 1000200
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000200;
        .@enchant_id = 310175;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }         
  - Item: EP17_2_EP50 # 1000201
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000201;
        .@enchant_id = 310176;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_EP51 # 1000202
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
    Result: |
        .@itemid = 1000202;
        .@enchant_id = 310177;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }   
  - Item: EP17_2_NO1 # 1000105
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      - Item: Auto_Engine_A # 480020
      - Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000105;
        .@enchant_id = 310082;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }           
  - Item: EP17_2_NO2 # 1000106
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      - Item: Auto_Engine_A # 480020
      - Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000106;
        .@enchant_id = 310083;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_NO3 # 1000107
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000107;
        .@enchant_id = 310084;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_NO4 # 1000108
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000108;
        .@enchant_id = 310085;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_NO5 # 1000109
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000109;
        .@enchant_id = 310086;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_NO6 # 1000110
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000110;
        .@enchant_id = 310087;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }          
  - Item: EP17_2_NO7 # 1000111
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000111;
        .@enchant_id = 310088;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_NO8 # 1000112
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000112;
        .@enchant_id = 310089;
        .@max_enchant = 3;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }           
  - Item: EP17_2_RA1 # 1000113
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000113;
        .@enchant_id = 310090;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_RA2 # 1000114
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000114;
        .@enchant_id = 310091;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_RA3 # 1000115
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000115;
        .@enchant_id = 310092;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }         
  - Item: EP17_2_RA4 # 1000116
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000116;
        .@enchant_id = 310093;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }             
  - Item: EP17_2_RA5 # 1000117
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000117;
        .@enchant_id = 310094;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }     
  - Item: EP17_2_RA6 # 1000118
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000118;
        .@enchant_id = 310095;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }             
  - Item: EP17_2_RA7 # 1000119
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000119;
        .@enchant_id = 310096;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_RA8 # 1000120
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000120;
        .@enchant_id = 310097;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }            
  - Item: EP17_2_RA9 # 1000121
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000121;
        .@enchant_id = 310098;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_RA10 # 1000122
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000122;
        .@enchant_id = 310099;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }            
  - Item: EP17_2_RA11 # 1000123
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000123;
        .@enchant_id = 310100;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_RA12 # 1000124
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000124;
        .@enchant_id = 310101;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }           
  - Item: EP17_2_RA13 # 1000125
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      - Item: Auto_Engine_A # 480020
      - Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000125;
        .@enchant_id = 310102;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }           
  - Item: EP17_2_RA14 # 1000126
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      - Item: Auto_Engine_A # 480020
      - Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000126;
        .@enchant_id = 310103;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }           
  - Item: EP17_2_RA15 # 1000127
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      - Item: Auto_Engine_A # 480020
      - Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000127;
        .@enchant_id = 310104;
        .@max_enchant = 2;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }           
  - Item: EP17_2_RA16 # 1000128
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000128;
        .@enchant_id = 310105;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }            
  - Item: EP17_2_RA17 # 1000129
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000129;
        .@enchant_id = 310106;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }            
  - Item: EP17_2_RA18 # 1000130
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000130;
        .@enchant_id = 310107;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }               
  - Item: EP17_2_RA19 # 1000131
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000131;
        .@enchant_id = 310108;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }               
  - Item: EP17_2_RA20 # 1000132
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000132;
        .@enchant_id = 310109;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }            
  - Item: EP17_2_RA21 # 1000207
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000207;
        .@enchant_id = 310178;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }          
  - Item: EP17_2_UQ1 # 1000133
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000133;
        .@enchant_id = 310110;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }          
  - Item: EP17_2_UQ2 # 1000134
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000134;
        .@enchant_id = 310111;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_UQ3 # 1000135
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      - Item: Auto_Engine_A # 480020
      - Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000135;
        .@enchant_id = 310112;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_UQ4 # 1000136
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000136;
        .@enchant_id = 310113;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }           
  - Item: EP17_2_UQ5 # 1000137
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000137;
        .@enchant_id = 310114;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_UQ6 # 1000138
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000138;
        .@enchant_id = 310115;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }            
  - Item: EP17_2_UQ7 # 1000139
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000139;
        .@enchant_id = 310116;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_UQ8 # 1000140
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000140;
        .@enchant_id = 310117;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }          
  - Item: EP17_2_UQ9 # 1000141
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000141;
        .@enchant_id = 310118;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_UQ10 # 1000142
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      - Item: Auto_Engine_A # 480020
      - Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000142;
        .@enchant_id = 310119;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }     
  - Item: EP17_2_UQ11 # 1000143
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      - Item: Auto_B_R # 490024
      - Item: Auto_B_L # 490025
      - Item: Auto_BC_R # 490026
      - Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000143;
        .@enchant_id = 310120;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_UQ12 # 1000208
    TargetItem:
      - Item: Auto_Armor_A # 450127
      - Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      #- Item: Auto_Leg_B # 470023
      #- Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000208;
        .@enchant_id = 310179;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }         
  - Item: EP17_2_LE1 # 1000144
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000144;
        .@enchant_id = 310121;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }       
  - Item: EP17_2_LE2 # 1000145
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000145;
        .@enchant_id = 310122;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }    
  - Item: EP17_2_LE3 # 1000146
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000146;
        .@enchant_id = 310123;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }        
  - Item: EP17_2_LE4 # 1000147
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000147;
        .@enchant_id = 310124;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }      
  - Item: EP17_2_LE5 # 1000148
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000148;
        .@enchant_id = 310125;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }         
  - Item: EP17_2_LE6 # 1000149
    TargetItem:
      #- Item: Auto_Armor_A # 450127
      #- Item: Auto_Armor_B # 450128
      #- Item: Auto_Engine_A # 480020
      #- Item: Auto_Engine_B # 480021
      - Item: Auto_Leg_B # 470023
      - Item: Auto_Leg_A # 470022
      #- Item: Auto_B_R # 490024
      #- Item: Auto_B_L # 490025
      #- Item: Auto_BC_R # 490026
      #- Item: Auto_BC_L $ 490027
    Result: |
        .@itemid = 1000149;
        .@enchant_id = 310126;
        .@max_enchant = 1;
        .@count_enchant = 0;
        if (@last_lapine_card1 == .@enchant_id) {
            .@count_enchant++;
        } 
        if (@last_lapine_card2 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card3 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == .@enchant_id) {
            .@count_enchant++;
        }
        if (@last_lapine_card4 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,.@enchant_id);
        } else if (@last_lapine_card3 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,.@enchant_id,@last_lapine_card4);
        } else if (@last_lapine_card2 == 0 && .@count_enchant < .@max_enchant) {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,.@enchant_id,@last_lapine_card3,@last_lapine_card4);
        } else {
            getitem2(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4);
            getitem .@itemid,1;
        }   
  - Item: Card_Removing_Matrix # 40915
    TargetItem:
      # 17.2 equipment
      - Item: 450127 #Auto_Armor_A # 450127
      - Item: 450128 #Auto_Armor_B # 450128
      - Item: 480020 #Auto_Engine_A # 480020
      - Item: 480021 #Auto_Engine_B # 480021
      - Item: 470023 #Auto_Leg_B # 470023
      - Item: 470022 #Auto_Leg_A # 470022
      - Item: 490024 #Auto_B_R # 490024
      - Item: 490025 #Auto_B_L # 490025
      - Item: 490026 #Auto_BC_R # 490026
      - Item: 490027 #Auto_BC_L $ 490027
      # Ancient weapon
      - Item: Royal_Bow_K
      - Item: Narcis_Bow
      - Item: Shadow_Staff_K
      - Item: Iron_Nail_K
      - Item: Magic_Sword
      - Item: Sword_Of_Bluefire
      - Item: Avenger
      - Item: Iron_Staff
      - Item: Oriental_Sword
      - Item: Undine_Spear_K
      - Item: Demon_Hunting_Bible_K
      - Item: Shiver_Katar_K
      - Item: OneSkyOneSun
      - Item: SoulWeight
      - Item: MeawFoxtail
      - Item: Crimson_Rose
      - Item: Master_Soul_Rifle
      - Item: Demon_S_Shot
      - Item: Golden_L_Launcher
      - Item: The_Black_Gatling
      - Item: Sharp_Wind_Sword
      - Item: Fog_Dew_Sword
      - Item: Humma_Clear
      - Item: Dragonic_Slayer
      - Item: Light_Blade
      - Item: Slate_Sword
      - Item: Trumpet_Shell_K
      - Item: Barb_Wire_K
      - Item: Meteor_Striker
      - Item: Blade_Katar
      - Item: Scalet_Dragon_L_Bow
      - Item: Fatalist
      - Item: Ray_Knuckle
      - Item: Saint_Hall
      - Item: Blue_Crystal_Staff
      - Item: Freezing_Rod
      - Item: Up_Oriental_Sword
      - Item: Up_Dragonic_Slayer
      - Item: Up_Shiver_Katar_K
      - Item: Up_Blade_Katar
      - Item: Up_Sword_Of_Bluefire
      - Item: Up_Slate_Sword
      - Item: Up_Narcis_Bow
      - Item: Up_Trumpet_Shell_K
      - Item: Up_Barb_Wire_K
      - Item: Up_Avenger
      - Item: Up_Magic_Sword
      - Item: Up_Fatalist
      - Item: Up_Meteor_Striker
      - Item: Up_Royal_Bow_K
      - Item: Up_Scalet_Dragon_L_Bow
      - Item: Up_Shadow_Staff_K
      - Item: Up_Freezing_Rod
      - Item: Up_Iron_Nail_K
      - Item: Up_Ray_Knuckle
      - Item: Up_Undine_Spear_K
      - Item: Up_Light_Blade
      - Item: Up_Iron_Staff
      - Item: Up_Blue_Crystal_Staff
      - Item: Up_Demon_Hunting_Bible
      - Item: Up_Saint_Hall
      - Item: Up_MeawFoxtail
      - Item: Up_Fog_Dew_Sword
      - Item: Up_Humma_Clear
      - Item: Up_Master_Soul_Rifle
      - Item: Up_Golden_L_Launcher
      - Item: Up_The_Black_Gatling
      - Item: Up_Demon_S_Shot
      - Item: Up_Crimson_Rose
      - Item: Up_OneSkyOneSun
      - Item: Up_SoulWeight   
      # 17.2 weapon      
      - Item: Ep172_1h_Sword
      - Item: Ep172_1h_Sword2
      - Item: Ep172_1h_Wand
      - Item: Ep172_1h_Book
      - Item: Ep172_1h_Axe
      - Item: Ep172_1h_Sword2
      - Item: Ep172_Bh_Bow
      - Item: Ep172_Bh_Bow2
      - Item: Ep172_Bh_knuck
      - Item: Ep172_1h_Spear
      - Item: Ep172_Bh_Spear
      - Item: Ep172_1h_Dagger
      - Item: Ep172_Bh_Katar
      - Item: Ep172_Bh_Staff
      - Item: Ep172_1h_Book2
      - Item: Ep172_1h_Dagger2
      - Item: Ep172_1h_Whip
      - Item: Ep172_1h_Inst
      - Item: Ep172_Bh_Bow3
      - Item: Ep172_Bh_Huuma
      - Item: Ep172_1h_Hammer
      - Item: Ep172_1h_Foxtail
      - Item: Ep172_1h_Rifle
      - Item: Ep172_1h_Shotgun
      - Item: Ep172_1h_Gatling
      - Item: Ep172_1h_Grenade 
      # Eindun weapon
      - Item: Ein_BHSWORD
      - Item: Ein_BHSTAFF
      - Item: Ein_BHHuuma
      - Item: Ein_BHKATAR
      - Item: Ein_BHAXE
      - Item: Ein_BHBOW
      - Item: Ein_1HKNUCK
      - Item: Ein_1HHAMMER
      - Item: Ein_1HWAND
      - Item: Ein_1HWHIP
      - Item: Ein_1HBOOK
      - Item: Ein_1HDAGGER
      - Item: Ein_1HMAGGER
      - Item: Ein_1HSPEAR
      - Item: Ein_1HLUTE
      - Item: Ein_1HSWORD
      - Item: Ein_1HGUN
      - Item: Ein_1H_Foxtail     
      # 17.1 item 
      - Item: Illusion_Armor_A  #15376 # Illusion_Armor_A
      - Item: Illusion_Armor_B  #15377 # Illusion_Armor_B
      - Item: Illusion_Engine_A #20933 # Illusion_Engine_A
      - Item: Illusion_Engine_B #20934 # Illusion_Engine_B
      - Item: Illusion_Leg_A    #22196 # Illusion_Leg_A
      - Item: Illusion_Leg_B    #22197 # Illusion_Leg_B
      - Item: Illusion_B_R  #32207 #Illusion_B_R ,Illusion Booster R,
      - Item: Illusion_B_L  #32208 #Illusion_B_L ,Illusion Booster L
      - Item: Illusion_BC_R #32209 #Illusion_BC_R ,Illusion Battle chip R
      - Item: Illusion_BC_L #32210 #Illusion_BC_L ,Illusion Battle chip L 
      # Fogh item      
      - Item: Schmidt_Insignia_Power # 32228
      - Item: Schmidt_Insignia_Divine_Power # 32229
      - Item: Schmidt_Insignia_Hundred_Lucks # 32230
      - Item: Schmidt_Insignia_Rigid_Body # 32231
      - Item: Schmidt_Insignia_Flash # 32232
      - Item: Schmidt_Insignia_Celestial # 32233  
      # Temporal item
      - Item: 22006 # Temporal_Str_Boots_
      - Item: 22007 # Temporal_Vit_Boots_
      - Item: 22008 # Temporal_Dex_Boots_
      - Item: 22009 # Temporal_Int_Boots_
      - Item: 22010 # Temporal_Agi_Boots_
      - Item: 22011 # Temporal_Luk_Boots_
      - Item: 20963 # Temporal_M_Str
      - Item: 20964 # Temporal_M_Agi
      - Item: 20965 # Temporal_M_Vit
      - Item: 20966 # Temporal_M_Int
      - Item: 20967 # Temporal_M_Dex
      - Item: 20968 # Temporal_M_Luk 
      # Cashshop item
      - Item: 32237 # Celine_Brooch_K
      - Item: 28424 # PlumpyWormCharm
      # Edda weapon
      - Item: 21051 # Volar
      - Item: 21052 # Vernan
      - Item: 32023 # Argen_Blanco
      - Item: 1333  # Golden_Wrench
      - Item: 16092 # Engine_Pilebuncker
      - Item: 28138 # Maxi_Spanner
      - Item: 28765 # Judgement_Slasher
      - Item: 28044 # Agudo_Filo
      - Item: 28042 # Ripper_Cross
      - Item: 26158 # Crimson_Rose_Stick
      - Item: 2055  # Staff_of_Miracle
      - Item: 2056  # Gravitation_Staff
      - Item: 26161 # Penitentia
      - Item: 2057  # Adorare_Staff
      - Item: 16095 # Lucis_Flail
      - Item: 18185 # Sharp_Star_Bow
      - Item: 18187 # Falken_Shooter
      - Item: 18186 # Aiming_Bow
      - Item: 32350 # Farthezan
      - Item: 32024 # Harve
      - Item: 32025 # Fortridge
      - Item: 32351 # Estal
      - Item: 16093 # Coolant_Injection
      - Item: 16094 # Gene_Rod
      - Item: 28767 # Jack_The_Knife
      - Item: 28768 # Platinum_Dagger
      - Item: 18184 # Rapid_Fire
      - Item: 28633 # Boltijin
      - Item: 26159 # Psychic_Spear_Rod
      - Item: 26160 # Dust_Grave
      - Item: 1865  # Raging_Dragon_Fist
      - Item: 1866  # Dedicated_Bandage
      - Item: 16096 # Bright_Pendulum
      - Item: 18188 # Wind_Gale
      - Item: 26212 # Heart_Whip
      - Item: 26213 # Scarlet_Ribbon
      - Item: 32107 # Black_Circle
      - Item: 32108 # Antique_Cello
    Result: |
        if (@last_lapine_card1) {
            getitem3(@last_lapine_id,1,1,.@refine,0,0,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,@last_lapine_option_id,@last_lapine_option_value,@last_lapine_option_param); 
            getitem @last_lapine_card1,1;
        } else {
            getitem3(@last_lapine_id,1,1,.@refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,@last_lapine_option_id,@last_lapine_option_value,@last_lapine_option_param);
        }
        getitem @last_lapine_sourceid,1;       
  - Item: 100412 # Great_Hero_Bravery # 100412
    TargetItem:
      - Item: Up_Oriental_Sword
      - Item: Up_Dragonic_Slayer
      - Item: Up_Shiver_Katar_K
      - Item: Up_Blade_Katar
      - Item: Up_Sword_Of_Bluefire
      - Item: Up_Slate_Sword
      - Item: Up_Narcis_Bow
      - Item: Up_Trumpet_Shell_K
      - Item: Up_Barb_Wire_K
      - Item: Up_Avenger
      - Item: Up_Magic_Sword
      - Item: Up_Fatalist
      - Item: Up_Meteor_Striker
      - Item: Up_Royal_Bow_K
      - Item: Up_Scalet_Dragon_L_Bow
      - Item: Up_Shadow_Staff_K
      - Item: Up_Freezing_Rod
      - Item: Up_Iron_Nail_K
      - Item: Up_Ray_Knuckle
      - Item: Up_Undine_Spear_K
      - Item: Up_Light_Blade
      - Item: Up_Iron_Staff
      - Item: Up_Blue_Crystal_Staff
      - Item: Up_Demon_Hunting_Bible
      - Item: Up_Saint_Hall
      - Item: Up_MeawFoxtail
      - Item: Up_Fog_Dew_Sword
      - Item: Up_Humma_Clear
      - Item: Up_Master_Soul_Rifle
      - Item: Up_Golden_L_Launcher
      - Item: Up_The_Black_Gatling
      - Item: Up_Demon_S_Shot
      - Item: Up_Crimson_Rose
      - Item: Up_OneSkyOneSun
      - Item: Up_SoulWeight       
    Result: |
      callfunc("F_Lapine_Greate_Hero_Bravery", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);
  - Item: 100413 # Great_Hero_Wisdom # 100413
    TargetItem:
      - Item: Up_Oriental_Sword
      - Item: Up_Dragonic_Slayer
      - Item: Up_Shiver_Katar_K
      - Item: Up_Blade_Katar
      - Item: Up_Sword_Of_Bluefire
      - Item: Up_Slate_Sword
      - Item: Up_Narcis_Bow
      - Item: Up_Trumpet_Shell_K
      - Item: Up_Barb_Wire_K
      - Item: Up_Avenger
      - Item: Up_Magic_Sword
      - Item: Up_Fatalist
      - Item: Up_Meteor_Striker
      - Item: Up_Royal_Bow_K
      - Item: Up_Scalet_Dragon_L_Bow
      - Item: Up_Shadow_Staff_K
      - Item: Up_Freezing_Rod
      - Item: Up_Iron_Nail_K
      - Item: Up_Ray_Knuckle
      - Item: Up_Undine_Spear_K
      - Item: Up_Light_Blade
      - Item: Up_Iron_Staff
      - Item: Up_Blue_Crystal_Staff
      - Item: Up_Demon_Hunting_Bible
      - Item: Up_Saint_Hall
      - Item: Up_MeawFoxtail
      - Item: Up_Fog_Dew_Sword
      - Item: Up_Humma_Clear
      - Item: Up_Master_Soul_Rifle
      - Item: Up_Golden_L_Launcher
      - Item: Up_The_Black_Gatling
      - Item: Up_Demon_S_Shot
      - Item: Up_Crimson_Rose
      - Item: Up_OneSkyOneSun
      - Item: Up_SoulWeight          
    Result: |
      callfunc("F_Lapine_Greate_Hero_Wisdom", .@opts[0], .@vals[0], .@opts[1], .@vals[1]);
      .@params[0] = 0;
      getitem3(@last_lapine_id,1,1,@last_lapine_refine,0,@last_lapine_card1,@last_lapine_card2,@last_lapine_card3,@last_lapine_card4,.@opts,.@vals,.@params);