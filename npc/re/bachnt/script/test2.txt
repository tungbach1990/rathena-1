hugel,90,143,0	script	Test#0	844,{
.charid = getcharid(0,strcharinfo(0));
        //message strcharinfo(0),"Charid: "+.charid;
        .atk = readparam(bAtk,.charid);
        message strcharinfo(0),"ATK: "+.atk;
	.atk = readparam(bAtk2,.charid);
        message strcharinfo(0),"ATK: "+.atk;
	.atk = readparam(matk_min,.charid);
        message strcharinfo(0),"ATK: "+.atk;
	.atk = readparam(matk_max,.charid);
        message strcharinfo(0),"ATK: "+.atk;

OnPCAttackEvent:
		if (@damagerid == 2411){
			.dupid = atoi(strnpcinfo(2));
			if (@damagegid == .gid[.dupid]) {
				//attachnpctimer;
			        startnpctimer "Test#"+.dupid;	
				//initnpctimer;
				.correct = .dupid;
				//message "GameMaster", .dupid;
				.name$[.correct] = strcharinfo(0);
				setd(".totaldamage" + strcharinfo(0) + "["+.correct+"]",getd(".totaldamage" + strcharinfo(0) + "["+.correct+"]") + @damage);
			}
		}
	end;

OnTimer5000:
	//getnpctimer(0,"Test#"+.dupid);
	//if (strcharinfo(0) == .name$[atoi(strnpcinfo(2))]){
	.gid = getcharid(3,.name$[atoi(strnpcinfo(2))]);
	npctalk .name$[atoi(strnpcinfo(2))] + " dealt "+getd(".totaldamage" + .name$[atoi(strnpcinfo(2))] + "["+ atoi(strnpcinfo(2)) +"]") +" trong 5s " + atoi(strnpcinfo(2));
	//@totaldamage[atoi(strnpcinfo(2))] = 0;
	setd(".totaldamage" + .name$[atoi(strnpcinfo(2))] + "[" + atoi(strnpcinfo(2)) + "]",0);
	initnpctimer "Test#"+atoi(strnpcinfo(2));
        stopnpctimer "Test#"+atoi(strnpcinfo(2));
	//}
end;
OnInit:
	initnpctimer strnpcinfo(0);
	stopnpctimer strnpcinfo(0);
	getunitdata(getnpcid(0), .@d);
	monster strnpcinfo(4),.@d[UNPC_X],.@d[UNPC_Y],"Punching Bag",2411,1,strnpcinfo(0)+"::OnMyMobDead";
	.dupid = atoi(strnpcinfo(2));
	.gid[.dupid] = $@mobid[0];
	.mhp[.dupid] = strmobinfo(4,2411);
	setunitdata .gid[.dupid],UMOB_MODE,.@d[UMOB_MODE]|0x4000000|0x0200000; // Set MD_STATUS_IMMUNE (0x4000000) because EDP/burn/%MHP based status can skew the DPS counter so much.
end;
OnMyMobDead:
	getunitdata(getnpcid(0), .@d);
        monster strnpcinfo(4),.@d[UNPC_X],.@d[UNPC_Y],"Punching Bag",2411,1,strnpcinfo(0)+"::OnMyMobDead";
        .dupid = atoi(strnpcinfo(2));
        .gid[.dupid] = $@mobid[0];
        .mhp[.dupid] = strmobinfo(4,2411);
        setunitdata .gid[.dupid],UMOB_MODE,.@d[UMOB_MODE]|0x4000000|0x0200000; // Set MD_STATUS_IMMUNE (0x4000000) because EDP/burn/%MHP based status can skew the DPS counter so much.
end;
}

hugel,92,139,0	duplicate(Test#0)	Test#1	844
