prontera,140,170,0	script	Test#0	844,{
.charid = getcharid(0,strcharinfo(0));
        //message strcharinfo(0),"Charid: "+.charid;
        .atk = readparam(bAtk,.charid);
        message strcharinfo(0),"ATK: "+.atk;
	.atk = readparam(bAtk2,.charid);
        message strcharinfo(0),"ATK: "+.atk;
	.atk = readparam(matk_min,.charid);
        message strcharinfo(0),"ATK: "+.atk;
	.atk = readparam(matk_max,.charid);
        message strcharinfo(0),"ATK: "+.atk;

OnPCAttackEvent:
		if (@damagerid == 2411){
			.dupid = atoi(strnpcinfo(2));
			if (@damagegid == .gid[.dupid]) {
				attachnpctimer;
			        startnpctimer;	
				initnpctimer;
				@totaldamage +=  @damage;
			}
		}
	end;

OnTimer5000:
	npctalk strcharinfo(0) + " dealt " + @totaldamage + " in 5s";
	@totaldamage = 0;	
	stopnpctimer;
end;
OnInit:
	initnpctimer strnpcinfo(0);
	stopnpctimer strnpcinfo(0);
	getunitdata(getnpcid(0), .@d);
	monster strnpcinfo(4),.@d[UNPC_X],.@d[UNPC_Y],"Punching Bag",2411,1,strnpcinfo(0)+"::OnMyMobDead";
	.dupid = atoi(strnpcinfo(2));
	.gid[.dupid] = $@mobid[0];
	.mhp[.dupid] = strmobinfo(4,2411)*10;
	setunitdata .gid[.dupid],UMOB_MODE,.@d[UMOB_MODE]|0x4000000|0x0200000; // Set MD_STATUS_IMMUNE (0x4000000) because EDP/burn/%MHP based status can skew the DPS counter so much.
	setunitdata .gid[.dupid],UMOB_MAXHP,.mhp[.dupid];
end;
OnMyMobDead:
	getunitdata(getnpcid(0), .@d);
        monster strnpcinfo(4),.@d[UNPC_X],.@d[UNPC_Y],"Punching Bag",2411,1,strnpcinfo(0)+"::OnMyMobDead";
        .dupid = atoi(strnpcinfo(2));
        .gid[.dupid] = $@mobid[0];
        .mhp[.dupid] = strmobinfo(4,2411)*10;
        setunitdata .gid[.dupid],UMOB_MODE,.@d[UMOB_MODE]|0x4000000|0x0200000; // Set MD_STATUS_IMMUNE (0x4000000) because EDP/burn/%MHP based status can skew the DPS counter so much.
	 setunitdata .gid[.dupid],UMOB_MAXHP,.mhp[.dupid];
end;
}

prontera,140,160,0	script	Test#1	844,{
.charid = getcharid(0,strcharinfo(0));
        //message strcharinfo(0),"Charid: "+.charid;
        .atk = readparam(bAtk,.charid);
        message strcharinfo(0),"ATK: "+.atk;
        .atk = readparam(bAtk2,.charid);
        message strcharinfo(0),"ATK: "+.atk;
        .atk = readparam(matk_min,.charid);
        message strcharinfo(0),"ATK: "+.atk;
        .atk = readparam(matk_max,.charid);
        message strcharinfo(0),"ATK: "+.atk;

OnPCAttackEvent:
                if (@damagerid == 2411){
                        .dupid = atoi(strnpcinfo(2));
                        if (@damagegid == .gid[.dupid]) {
                                attachnpctimer;
                                startnpctimer;
                                initnpctimer;
                                @totaldamage +=  @damage;
                        }
                }
        end;

OnTimer5000:
        npctalk strcharinfo(0) + " dealt " + @totaldamage + " in 5s";
        @totaldamage = 0;
        stopnpctimer;
end;
OnInit:
        initnpctimer strnpcinfo(0);
        stopnpctimer strnpcinfo(0);
        getunitdata(getnpcid(0), .@d);
        monster strnpcinfo(4),.@d[UNPC_X],.@d[UNPC_Y],"Punching Bag",2411,1,strnpcinfo(0)+"::OnMyMobDead";
        .dupid = atoi(strnpcinfo(2));
        .gid[.dupid] = $@mobid[0];
        .mhp[.dupid] = strmobinfo(4,2411)*10;
        setunitdata .gid[.dupid],UMOB_MODE,.@d[UMOB_MODE]|0x4000000|0x0200000; // Set MD_STATUS_IMMUNE (0x4000000) because EDP/burn/%MHP based status can skew the DPS counter so much.
        setunitdata .gid[.dupid],UMOB_MAXHP,.mhp[.dupid];
end;
OnMyMobDead:
        getunitdata(getnpcid(0), .@d);
        monster strnpcinfo(4),.@d[UNPC_X],.@d[UNPC_Y],"Punching Bag",2411,1,strnpcinfo(0)+"::OnMyMobDead";
        .dupid = atoi(strnpcinfo(2));
        .gid[.dupid] = $@mobid[0];
        .mhp[.dupid] = strmobinfo(4,2411)*10;
        setunitdata .gid[.dupid],UMOB_MODE,.@d[UMOB_MODE]|0x4000000|0x0200000; // Set MD_STATUS_IMMUNE (0x4000000) because EDP/burn/%MHP based status can skew the DPS counter so much.
         setunitdata .gid[.dupid],UMOB_MAXHP,.mhp[.dupid];
end;
}
